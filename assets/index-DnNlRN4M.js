var He=Object.defineProperty;var Be=(t,a,n)=>a in t?He(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;var ge=(t,a,n)=>Be(t,typeof a!="symbol"?a+"":a,n);import{r as v,j as e,i as ie,h as le,R as y,C as ke,g as ue,W as qe,X as be,Y as Ue,L as B,Z as $e,_ as Oe,Q as Se,$ as Qe,a0 as ve,S as pe,N as Ye,A as Je,m as Ge,E as ye,T as Ve,U as Ke,I as Xe,c as Ce,K as Ze,p as Te,a1 as et,a2 as je,z as tt,o as st,q as it,n as at,l as nt,a3 as rt,a4 as lt,a5 as ot,a6 as ct,a7 as Q}from"./vendor-react-5Lxm-uQd.js";import{y as dt}from"./vendor-XeNgptnJ.js";import{b as re,c as oe,a as M,A,u as ce,i as ut,j as mt,h as Ee,k as ne,B as pt,f as se,l as ht,T as ft,D as xt,F as gt,m as bt}from"./mappi-routes-XOagACVu.js";import{u as _e,a as Ae,b as vt,c as yt,d as jt,M as Nt,P as wt,Q as kt,e as St,N as Ct}from"./moddi-routes-DC1K1_x4.js";import{b as Tt,a as Et,i as _t,c as At,H as Lt}from"./editor-components-BstHLSQQ.js";import{s as zt,E as Mt}from"./editor-CCRXOUzg.js";import"./vendor-hls-B_fsdCYC.js";import"./beatmap-preview-BBMxK6Lq.js";import"./vendor-zip-D_60cdrC.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))l(x);new MutationObserver(x=>{for(const o of x)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function n(x){const o={};return x.integrity&&(o.integrity=x.integrity),x.referrerPolicy&&(o.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?o.credentials="include":x.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(x){if(x.ep)return;x.ep=!0;const o=n(x);fetch(x.href,o)}})();const It=new dt({defaultOptions:{queries:{staleTime:30*1e3,gcTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1},mutations:{retry:0}}});class Rt extends v.Component{constructor(n){super(n);ge(this,"handleRetry",()=>{const n=this.isChunkLoadingError(this.state.error);this.setState({hasError:!1,error:null}),n&&window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,l){console.error("ErrorBoundary caught an error:",n,l)}isChunkLoadingError(n){if(!n)return!1;const l=n.message.toLowerCase();return l.includes("loading chunk")||l.includes("failed to load")||l.includes("chunk load failed")||l.includes("loading css chunk")||n.name==="ChunkLoadError"}render(){var n;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const l=this.isChunkLoadingError(this.state.error),x=((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"24px",textAlign:"center"},children:[e.jsx("h2",{style:{marginBottom:"16px",color:"var(--danger)"},children:"Something went wrong"}),e.jsx("p",{style:{marginBottom:"8px",color:"var(--muted)"},children:l?"Failed to load page. This might be a network issue.":x}),l&&e.jsx("p",{style:{marginBottom:"24px",fontSize:"14px",color:"var(--muted)",opacity:.8},children:"Try checking your internet connection or reloading the page."}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[e.jsx("button",{className:"btn secondary",onClick:this.handleRetry,children:l?"Reload Page":"Try Again"}),!l&&e.jsx("button",{className:"btn secondary",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})}return this.props.children}}function Ft(){const t=ie(),a=le(),{lastSection:n,previousLocation:l,setPreviousLocation:x}=re(),o=y.useRef(null),g=y.useRef(!1),j=y.useRef(0),h=y.useRef(0),E=y.useRef(null),u=y.useRef(null),_=y.useRef(!1),S=300,I=2e3,m=y.useRef(null),p=y.useRef(null),d=y.useRef(null),[c,C]=y.useState(!1),[F,b]=y.useState(12),z=y.useRef(null),N=y.useRef(null),[i,L]=y.useState(!1),[R,$]=y.useState(12),[V,W]=y.useState([]),[G,X]=y.useState(""),D=y.useRef(null),Y=y.useRef(null),[J,r]=y.useState(!1),[T,k]=y.useState(12),[U,te]=y.useState(null),ae=y.useCallback(()=>{if(!p.current)return;const f=p.current.getBoundingClientRect(),H=window.innerWidth||document.documentElement.clientWidth||320,q=160;let P=f.left;P+q+8>H&&(P=Math.max(8,H-q-8)),P=Math.max(8,P),b(P)},[]),s=y.useCallback(()=>{if(!z.current)return;const f=z.current.getBoundingClientRect(),H=window.innerWidth||document.documentElement.clientWidth||320,q=220;let P=f.left;P+q+8>H&&(P=Math.max(8,H-q-8)),P=Math.max(8,P),$(P)},[]),w=y.useCallback(()=>{if(!D.current)return;const f=D.current.getBoundingClientRect(),H=window.innerWidth||document.documentElement.clientWidth||320,q=280;let P=f.left;P+q+8>H&&(P=Math.max(8,H-q-8)),P=Math.max(8,P),k(P)},[]);y.useEffect(()=>()=>{o.current&&clearTimeout(o.current),E.current&&clearTimeout(E.current),u.current&&clearTimeout(u.current)},[]),y.useEffect(()=>{if(!c)return;const f=H=>{const q=H.target;d.current&&!d.current.contains(q)&&p.current&&!p.current.contains(q)&&C(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[c]),y.useEffect(()=>{if(!i)return;const f=H=>{const q=H.target;N.current&&!N.current.contains(q)&&z.current&&!z.current.contains(q)&&L(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[i]),y.useEffect(()=>{if(!J)return;const f=H=>{const q=H.target;Y.current&&!Y.current.contains(q)&&D.current&&!D.current.contains(q)&&r(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[J]),y.useEffect(()=>{if(!c)return;ae();const f=()=>ae();return window.addEventListener("resize",f),window.addEventListener("orientationchange",f),()=>{window.removeEventListener("resize",f),window.removeEventListener("orientationchange",f)}},[c,ae]),y.useEffect(()=>{if(!i)return;s();const f=()=>s();return window.addEventListener("resize",f),window.addEventListener("orientationchange",f),()=>{window.removeEventListener("resize",f),window.removeEventListener("orientationchange",f)}},[i,s]),y.useEffect(()=>{if(!J)return;w();const f=()=>w();return window.addEventListener("resize",f),window.addEventListener("orientationchange",f),()=>{window.removeEventListener("resize",f),window.removeEventListener("orientationchange",f)}},[J,w]);const K=t.pathname==="/"||t.pathname==="/about",O=t.pathname==="/editor";t.pathname.startsWith("/mp/")||!K&&t.pathname.startsWith("/md/");const ee=t.pathname.startsWith("/md/")||!K&&!t.pathname.startsWith("/mp/")&&n==="moddi";y.useEffect(()=>{if(!O)return;const f=q=>{const P=q.detail||{},We=Array.isArray(P.items)?P.items:[];W(We),X(String(P.selected||""))},H=q=>{const P=q.detail||{};te({title:String(P.title||""),artist:String(P.artist||""),mapper:String(P.mapper||""),version:String(P.version||""),beatmapId:Number(P.beatmapId)||null})};return window.addEventListener("editor:difficulty:list",f),window.addEventListener("editor:info",H),()=>{window.removeEventListener("editor:difficulty:list",f),window.removeEventListener("editor:info",H)}},[O]);const Le=_e();if(K)return null;const he=()=>{a(l||(n==="moddi"?"/md/feed":"/mp/feed"))},ze=()=>{C(f=>!f)},Me=()=>{var f;C(!1),(f=m.current)==null||f.click()},Ie=()=>{L(f=>!f)},Re=f=>{L(!1),X(f),window.dispatchEvent(new CustomEvent("editor:difficulty:select",{detail:{path:f}}))},Fe=()=>{r(f=>!f)};if(O)return e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:m,type:"file",accept:".osz,.zip",onChange:f=>{var q;const H=(q=f.target.files)==null?void 0:q[0];H&&window.dispatchEvent(new CustomEvent("editor:file",{detail:H}))},style:{display:"none"}}),e.jsxs("nav",{className:"mobile-bottom-nav mobile-bottom-nav-editor",children:[e.jsxs("div",{className:"mobile-bottom-nav-left",children:[e.jsx("button",{className:"mobile-bottom-nav-item mobile-bottom-nav-icon-only",onClick:he,"aria-label":"Back",title:"Go back",children:e.jsx(ke,{size:20})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{ref:p,className:"mobile-bottom-nav-item mobile-bottom-nav-icon-only",onClick:ze,"aria-label":"File",title:"File menu","aria-expanded":c,children:e.jsx(qe,{size:20})}),c&&ue.createPortal(e.jsx("div",{ref:d,className:"menu-panel mobile-bottom-nav-menu",role:"menu",style:{"--mobile-menu-left":`${F}px`},children:e.jsx("button",{className:"menu-item",type:"button",onClick:Me,style:{fontFamily:"Torus Pro, Torus, ui-sans-serif, system-ui, sans-serif"},children:"Open .osz"})}),document.body)]})]}),e.jsx("button",{className:"mobile-bottom-nav-coin-flip",onClick:he,"aria-label":"Go back",title:"Go back to previous page",children:e.jsx("span",{className:"mobile-coin-flip-text",children:"ed!"})}),e.jsxs("div",{className:"mobile-bottom-nav-right",children:[V.length>0&&e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{ref:z,className:"mobile-bottom-nav-item mobile-bottom-nav-icon-only",onClick:Ie,"aria-label":"Select Difficulty",title:"Select Difficulty","aria-expanded":i,children:e.jsx(be,{size:20})}),i&&ue.createPortal(e.jsx("div",{ref:N,className:"settings-panel mobile-bottom-nav-menu",role:"menu",style:{"--mobile-menu-left":`${R}px`,minWidth:220},children:V.map(f=>{const H=f.mode==="taiko"?Tt:f.mode==="mania"?Et:f.mode==="catch"?_t:At;return e.jsxs("button",{className:`mode-option ${G===f.path?"selected":""}`,type:"button",onClick:()=>Re(f.path),children:[e.jsx("img",{className:"mode-icon",src:H,width:24,height:24,alt:""}),e.jsx("span",{children:f.version||"(Untitled)"})]},f.path)})}),document.body)]}),U&&e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{ref:D,className:"mobile-bottom-nav-item mobile-bottom-nav-icon-only",onClick:Fe,"aria-label":"Map Info",title:"Map Info","aria-expanded":J,children:e.jsx(Ue,{size:20})}),J&&ue.createPortal(e.jsx("div",{ref:Y,className:"menu-panel mobile-bottom-nav-menu",role:"dialog",style:{"--mobile-menu-left":`${T}px`,minWidth:280,maxWidth:"min(380px, calc(100vw - 24px))"},children:e.jsxs("div",{style:{padding:"4px 0"},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"var(--text)",marginBottom:8},children:[U.artist||"Artist"," – ",U.title||"Title"]}),e.jsxs("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:["Mapped by: ",U.mapper||"Unknown"]}),U.version&&e.jsxs("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:["Difficulty: ",U.version]}),U.beatmapId&&e.jsx("div",{style:{fontSize:12,color:"var(--muted)",marginTop:8},children:e.jsx("a",{href:`https://osu.ppy.sh/beatmaps/${U.beatmapId}`,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--primary)",textDecoration:"none"},children:"View on osu.ppy.sh →"})})]})}),document.body)]})]})]})]});const fe=()=>{const f=Date.now();if(j.current>0){const H=f-j.current;if(H<S&&H>0){E.current&&(clearTimeout(E.current),E.current=null),u.current&&(clearTimeout(u.current),u.current=null),o.current&&(clearTimeout(o.current),o.current=null),h.current=f+I,j.current=0,g.current=!1,x(t.pathname),a("/editor");return}}f<h.current&&j.current===0||(E.current&&(clearTimeout(E.current),E.current=null),u.current&&(clearTimeout(u.current),u.current=null),j.current=f,u.current=setTimeout(()=>{u.current!==null&&(a(ee?"/mp/feed":"/md/feed"),u.current=null)},S),E.current=setTimeout(()=>{j.current>0&&(j.current=0,h.current=Date.now()+I),E.current=null},S))},xe=()=>{g.current=!1,o.current=setTimeout(()=>{g.current=!0,a("/")},500)},de=()=>{o.current&&(clearTimeout(o.current),o.current=null),g.current&&setTimeout(()=>{g.current=!1},100)},De=f=>{if(_.current){f.preventDefault(),f.stopPropagation(),_.current=!1;return}if(g.current){f.preventDefault(),f.stopPropagation();return}fe()},Pe=f=>{if(de(),g.current){f.preventDefault(),_.current=!0;return}f.preventDefault(),fe(),_.current=!0,setTimeout(()=>{_.current=!1},S+100)};return e.jsxs("nav",{className:"mobile-bottom-nav",children:[e.jsxs("div",{className:"mobile-bottom-nav-left",children:[e.jsx(B,{to:ee?"/md/feed":"/mp/feed",className:`mobile-bottom-nav-item mobile-bottom-nav-icon-only ${t.pathname==="/mp/feed"||t.pathname==="/md/feed"?"active":""}`,"aria-label":"Feed",children:e.jsx(be,{size:20})}),ee?e.jsx(B,{to:"/md/queues",className:`mobile-bottom-nav-item mobile-bottom-nav-icon-only ${t.pathname.startsWith("/md/queues")?"active":""}`,"aria-label":"Queues",children:e.jsx($e,{size:20})}):e.jsx(B,{to:"/mp/discover",className:`mobile-bottom-nav-item mobile-bottom-nav-icon-only ${t.pathname==="/mp/discover"?"active":""}`,"aria-label":"Discover",children:e.jsx(Oe,{size:20})})]}),e.jsx("button",{className:"mobile-bottom-nav-coin-flip",onClick:De,onTouchStart:xe,onTouchEnd:Pe,onMouseDown:xe,onMouseUp:de,onMouseLeave:de,"aria-label":ee?"Switch to Mappi (long press for home)":"Switch to Moddi (long press for home)",title:ee?"Switch to Mappi (long press for home)":"Switch to Moddi (long press for home)",children:e.jsx("span",{className:"mobile-coin-flip-text",children:ee?"md!":"mp!"})}),e.jsxs("div",{className:"mobile-bottom-nav-right",children:[e.jsxs(B,{to:"/md/notifications",className:`mobile-bottom-nav-item mobile-bottom-nav-icon-only ${t.pathname==="/md/notifications"?"active":""}`,"aria-label":"Notifications",style:{position:"relative",overflow:"visible"},children:[e.jsx(Se,{size:20}),Le>0&&e.jsx("div",{style:{position:"absolute",top:4,right:4,width:10,height:10,background:"#f87171",borderRadius:9999,zIndex:10,pointerEvents:"none",border:"2px solid var(--panel)",boxSizing:"border-box"}})]}),e.jsx("button",{className:`mobile-bottom-nav-item mobile-bottom-nav-icon-only ${t.pathname==="/settings"?"active":""}`,onClick:()=>a("/settings"),"aria-label":"Settings",children:e.jsx(Qe,{size:20})})]})]})}function Dt({isModdi:t,onClick:a}){return e.jsxs("button",{onClick:a,className:"title coin-flip-title",style:{background:"transparent",border:"none",padding:0,cursor:"pointer",color:"inherit"},title:"Switch section (double-click for editor)","aria-label":"Switch section (double-click for editor)",children:[e.jsx("span",{className:"coin-flip-front",children:t?"osu!moddi.ng":"osu!mappi.ng"}),e.jsx("span",{className:"coin-flip-back",children:t?"osu!mappi.ng":"osu!moddi.ng"})]})}function Pt({isNeutralPage:t,isEditor:a,isModdi:n,isMappi:l,onCoinFlipClick:x}){return t?e.jsx(B,{to:"/",className:"title",children:n?"osu!moddi.ng":l?"osu!mappi.ng":"mappi!"}):a?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(B,{to:"/",className:"icon-link",title:"Home","aria-label":"Home",style:{width:"auto",height:"auto",padding:"4px"},children:e.jsx(ve,{size:18})}),e.jsx(B,{to:n?"/md/feed":"/mp/feed",className:"title",children:"osu!editi.ng"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(B,{to:"/",className:"icon-link",title:"Home","aria-label":"Home",style:{width:"auto",height:"auto",padding:"4px"},children:e.jsx(ve,{size:18})}),e.jsx(Dt,{isModdi:n,onClick:x})]})}function Wt({isNeutralPage:t,isMappi:a,isModdi:n}){const l=ie();return e.jsxs("nav",{className:"nav-links","aria-label":"Primary",children:[t&&e.jsx(B,{to:l.pathname==="/"?"/about":"/",className:l.pathname==="/about"?"active":"",children:l.pathname==="/"?"About":"Home"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(B,{to:"/mp/feed",className:l.pathname==="/mp/feed"?"active":"",children:"Feed"}),e.jsx(B,{to:"/mp/discover",className:l.pathname==="/mp/discover"?"active":"",children:"Discover"}),e.jsx(B,{to:"/editor",className:l.pathname==="/editor"?"active":"",children:"Editor"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx(B,{to:"/md/feed",className:l.pathname==="/md/feed"?"active":"",children:"Feed"}),e.jsx(B,{to:"/md/queues",className:l.pathname.startsWith("/md/queues")?"active":"",children:"Queues"})]}),!a&&!n&&!t&&e.jsxs(e.Fragment,{children:[e.jsx(B,{to:"/mp/feed",className:l.pathname==="/mp/feed"?"active":"",children:"Feed"}),e.jsx(B,{to:"/mp/discover",className:l.pathname==="/mp/discover"?"active":"",children:"Discover"}),e.jsx(B,{to:"/editor",className:l.pathname==="/editor"?"active":"",children:"Editor"})]})]})}function Ht(t,a,n,l){const x=le(),{notify:o}=oe(),[g,j]=v.useState(new Set);return{parseQueueInvite:m=>{if(!m)return null;try{const p=JSON.parse(m);if((p==null?void 0:p.type)==="queue_invite"&&(p!=null&&p.queue_id))return p}catch{}return null},handleAcceptInvite:async(m,p)=>{if(!g.has(m.id)){j(d=>new Set(d).add(m.id));try{await M(A.moddi.queueAccept(String(p)),{method:"POST"}),o("Invitation accepted!",{variant:"success"}),n.mutate(m.id),l(!1),x(`/md/queues/${p}`)}catch(d){o((d==null?void 0:d.message)||"Failed to accept invitation",{variant:"error"})}finally{j(d=>{const c=new Set(d);return c.delete(m.id),c})}}},handleDenyInvite:async(m,p)=>{if(!g.has(m.id)){j(d=>new Set(d).add(m.id));try{await M(A.moddi.queueDeny(String(p)),{method:"POST"}),o("Invitation declined",{variant:"success"}),n.mutate(m.id)}catch(d){o((d==null?void 0:d.message)||"Failed to decline invitation",{variant:"error"})}finally{j(d=>{const c=new Set(d);return c.delete(m.id),c})}}},handleMarkAllRead:async()=>{const m=t.filter(p=>p.id.startsWith("n:")||p.kind==="system"&&!p.read).map(p=>p.id);m.length>0&&a.mutate(m)},handleNotificationClick:async m=>{if(l(!1),a.mutate([m.id]),m.kind==="system"||m.id.startsWith("n:"))try{await M(A.user.markNotificationsRead,{method:"POST",body:JSON.stringify({ids:[m.id]})})}catch{}},handleDeleteNotification:async(m,p)=>{m.stopPropagation(),n.mutate(p)},processing:g}}function Bt({notifications:t,unreadCount:a,notifOpen:n,setNotifOpen:l,markReadMutation:x,deleteNotificationMutation:o,closeAllPanels:g}){const j=v.useRef(null),h=v.useRef(null),{parseQueueInvite:E,handleAcceptInvite:u,handleDenyInvite:_,handleMarkAllRead:S,handleNotificationClick:I,handleDeleteNotification:m,processing:p}=Ht(t,x,o,l);Ae(j,h,n,()=>l(!1));const d=t.filter(c=>!(c.kind==="system"&&c.id.startsWith("b:")&&(c.expiresAt||0)<=Date.now()));return e.jsxs("div",{style:{position:"relative",display:"inline-block",marginRight:3},children:[e.jsx("button",{ref:j,className:"icon-link",onClick:()=>{n||g(),l(!n)},"aria-label":"Notifications",title:"Notifications",children:e.jsx(Se,{size:18})}),a>0&&e.jsx("span",{style:{position:"absolute",top:2,right:2,width:8,height:8,background:"#f87171",borderRadius:9999}}),n&&e.jsxs("div",{ref:h,className:"menu-panel notif-panel",role:"menu",children:[e.jsxs("div",{className:"row-between",style:{alignItems:"center",marginBottom:6},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:"Notifications"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(B,{to:"/md/notifications",onClick:()=>l(!1),style:{fontSize:12,color:"var(--text)",textDecoration:"none",opacity:.7,transition:"opacity 0.15s ease"},onMouseEnter:c=>c.currentTarget.style.opacity="1",onMouseLeave:c=>c.currentTarget.style.opacity="0.7",children:"View all"}),d.length>0&&e.jsx("button",{className:"icon-link",title:"Mark all read","aria-label":"Mark all read",onClick:S,children:e.jsx(pe,{size:16})})]})]}),e.jsxs("div",{className:"notif-list",children:[d.length===0&&e.jsx("div",{className:"muted",style:{fontSize:12,padding:"6px 2px"},children:"No notifications.. :("}),d.map(c=>{const C=E(c.text),F=c.id.startsWith("b:"),b=C?"queue-invite":c.kind==="star"?"star":c.kind==="likes5"?"likes":c.kind==="comment"?"comment":c.kind==="inspiration"?"inspiration":c.kind==="reaction"?"reaction":F?"global":"system",z=c.id.startsWith("n:");return e.jsxs("div",{className:`notif-item ${b}`,role:"button",onClick:()=>!C&&I(c),children:[e.jsxs("div",{className:`notif-icon ${z?"deletable":""}`,"aria-hidden":"true",onClick:z&&!C?N=>m(N,c.id):void 0,title:z&&!C?"Remove":void 0,role:z&&!C?"button":void 0,children:[e.jsx("span",{className:"swap-main",children:C?e.jsx(Ye,{}):b==="star"?e.jsx(Je,{}):b==="likes"?e.jsx(Ge,{}):b==="comment"?e.jsx(ye,{}):b==="inspiration"?e.jsx(ye,{}):b==="reaction"?e.jsx(Ve,{}):b==="global"?e.jsx(Ke,{}):null}),z&&!C?e.jsx("span",{className:"swap-trash",children:e.jsx(Xe,{})}):null]}),e.jsx("div",{className:"notif-body",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:"Queue Invitation"}),e.jsxs("div",{className:"notif-desc",children:[C.inviter_username," invited you to join queue: ",C.queue_name]}),p.has(c.id)?e.jsx("div",{className:"muted",style:{fontSize:11,marginTop:6},children:"Processing..."}):e.jsxs("div",{style:{display:"flex",gap:6,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:N=>{N.stopPropagation(),u(c,C.queue_id)},style:{fontSize:11,padding:"4px 8px",flex:1},children:[e.jsx(pe,{size:12,style:{marginRight:4}}),"Accept"]}),e.jsxs("button",{className:"btn secondary",onClick:N=>{N.stopPropagation(),_(c,C.queue_id)},style:{fontSize:11,padding:"4px 8px",flex:1},children:[e.jsx(Ce,{size:12,style:{marginRight:4}}),"Decline"]})]})]}):c.kind==="system"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:F?"Global":"System"}),e.jsx("div",{className:"notif-desc",children:c.text||""}),F&&c.expiresAt?e.jsxs("div",{className:"notif-exp",children:["Expires at: ",new Date(c.expiresAt).toLocaleString()]}):null]}):c.kind==="comment"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:"Comment"}),e.jsx("div",{className:"notif-desc",children:c.text||"Someone commented on your post"})]}):c.kind==="inspiration"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:"Inspiration"}),e.jsx("div",{className:"notif-desc",children:c.text||"Someone is inspired by you!"})]}):c.kind==="reaction"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:"Reaction"}),e.jsx("div",{className:"notif-desc",children:c.text||"Someone raised their hand on your post!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"notif-title",children:c.kind==="star"?"Star":"Likes"}),e.jsx("div",{className:"notif-desc",children:c.kind==="star"?"One of your posts was starred!":"One of your posts reached 5 likes!"})]})})]},c.id)})]})]})]})}function qt({quota:t,nowTick:a}){if(!(t!=null&&t.blocked))return null;const n=Math.max(0,Math.floor((((t==null?void 0:t.reset_at)??0)*1e3-Date.now())/1e3)),l=Math.floor(n/3600),x=Math.floor(n%3600/60),o=n%60,g=h=>String(h).padStart(2,"0"),j=l>0?`${l}:${g(x)}:${g(o)}`:`${x}:${g(o)}`;return e.jsxs("div",{title:"Upload limit reached","aria-label":"Upload limit reached",style:{display:"inline-flex",alignItems:"center",gap:4,marginRight:8},children:[e.jsx(Ze,{}),e.jsx("span",{className:"muted",style:{fontSize:12},children:j})]})}function Ut({me:t,menuOpen:a,setMenuOpen:n,onLogout:l,closeAllPanels:x}){const o=v.useRef(null),g=v.useRef(null);return Ae(o,g,a,()=>n(!1)),e.jsxs(e.Fragment,{children:[e.jsxs("button",{ref:o,className:"icon-link",onClick:()=>{a||x(),n(!a)},title:t.username,"aria-label":"User menu","aria-expanded":a,style:{width:"auto",height:40,padding:"0 8px",display:"inline-flex",alignItems:"center",gap:6},children:[t.avatar_url&&e.jsx("img",{src:t.avatar_url,width:22,height:22,style:{borderRadius:"50%"}}),e.jsx("span",{className:"muted",style:{display:"inline-block",verticalAlign:"middle"},children:t.username}),e.jsx(Te,{size:14,style:{opacity:.8}})]}),a&&e.jsxs("div",{ref:g,className:"menu-panel",role:"menu",children:[e.jsx(B,{to:"/profile",className:"menu-item",onClick:()=>n(!1),children:"Profile"}),((t==null?void 0:t.is_admin)||(t==null?void 0:t.is_mod))&&e.jsx(B,{to:"/moderation",className:"menu-item",onClick:()=>n(!1),children:"Moderation"}),e.jsx("button",{className:"menu-item",type:"button",onClick:l,children:"Log out"})]})]})}function $t({isNeutralPage:t,isEditor:a,isMappi:n,isModdi:l,onCoinFlipClick:x}){const o=ie(),{data:g,isLoading:j}=ce(),{data:h}=ut(!!g),{data:E=[]}=vt(!!g),u=_e(),_=mt(),S=yt(),I=jt(),{menuOpen:m,notifOpen:p,setMenuOpen:d,setNotifOpen:c,closeAllPanels:C}=re(),[F,b]=y.useState(0);return y.useEffect(()=>{const z=setInterval(()=>b(N=>N+1),1e3);return()=>clearInterval(z)},[]),e.jsxs("header",{className:"top-nav",children:[e.jsx(Pt,{isNeutralPage:t,isEditor:a,isModdi:l,isMappi:n,onCoinFlipClick:x}),e.jsx("span",{className:"nav-divider","aria-hidden":"true"}),o.pathname==="/editor"?e.jsx("div",{style:{display:"flex",alignItems:"center",gap:10,flex:1},children:e.jsx(Lt,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{isNeutralPage:t,isMappi:n,isModdi:l}),e.jsx("div",{style:{marginLeft:"auto"}}),e.jsx("a",{className:"icon-link",href:"https://discord.gg/3FZKUuumE2",target:"_blank",rel:"noreferrer",title:"Join Discord (opens in new tab)","aria-label":"Join Discord",style:{marginRight:3,transform:"translateY(2px)"},children:e.jsx(et,{size:18})}),g?e.jsxs("div",{className:"user-menu",children:[e.jsx(Bt,{notifications:E,unreadCount:u,notifOpen:p,setNotifOpen:c,markReadMutation:S,deleteNotificationMutation:I,closeAllPanels:C}),e.jsx(qt,{quota:h,nowTick:F}),e.jsx(Ut,{me:g,menuOpen:m,setMenuOpen:d,onLogout:()=>_.mutate(),closeAllPanels:C})]}):e.jsx("button",{className:"btn secondary",onClick:()=>{window.location.href=Ee+A.auth.login},disabled:j,children:j?"Checking…":"Login with osu!"})]})]})}function Ot({title:t,onRefresh:a}){const{data:n}=ce(),l=ie(),x=le(),{lastSection:o}=re(),[g,j]=y.useState(!0),[h,E]=y.useState(0),[u,_]=y.useState(!1),S=y.useRef(!1),I=y.useRef(0);y.useEffect(()=>{const d=document.querySelector(".page");if(!d)return;let c=d.scrollTop,C=!1;const F=()=>{C||(C=!0,requestAnimationFrame(()=>{const b=d.scrollTop,z=b-c;b<=12||z<-12?j(!0):z>12&&j(!1),c=b,C=!1}))};return d.addEventListener("scroll",F,{passive:!0}),()=>d.removeEventListener("scroll",F)},[]),y.useEffect(()=>{const d=document.querySelector(".page");if(!d)return;const c=120,C=70,F=i=>{var L;u||(d.scrollTop<=0?(S.current=!0,I.current=((L=i.touches[0])==null?void 0:L.clientY)??0):S.current=!1)},b=i=>{var $;if(!S.current||u)return;const L=(($=i.touches[0])==null?void 0:$.clientY)??0,R=Math.max(0,L-I.current);if(R>0){const V=Math.min(c,R*.5);E(V)}},z=async()=>{try{if(_(!0),a)await a();else{window.location.reload();return}}finally{setTimeout(()=>{_(!1),E(0)},400)}},N=()=>{!S.current||u||(h>=C?z():E(0),S.current=!1)};return d.addEventListener("touchstart",F,{passive:!0}),d.addEventListener("touchmove",b,{passive:!0}),d.addEventListener("touchend",N),d.addEventListener("touchcancel",N),()=>{d.removeEventListener("touchstart",F),d.removeEventListener("touchmove",b),d.removeEventListener("touchend",N),d.removeEventListener("touchcancel",N)}},[h,u,a]);const{showBack:m,onBack:p}=y.useMemo(()=>{const d=l.pathname;if(/^\/mp\/feed\/.+/.test(d))return{showBack:!0,onBack:()=>x("/mp/feed")};if(/^\/md\/feed\/.+/.test(d))return{showBack:!0,onBack:()=>x("/md/feed")};if(/^\/md\/queues\/.+/.test(d))return{showBack:!0,onBack:()=>x("/md/queues")};if(d==="/profile"||d.startsWith("/profile/")){const c=o==="moddi"?"/md/feed":"/mp/feed";return{showBack:!0,onBack:()=>{window.history.length>2?x(-1):x(c)}}}return{showBack:!1,onBack:()=>{}}},[l.pathname,x,o]);return e.jsxs("div",{className:`mobile-page-header ${g?"":"collapsed"}`,children:[e.jsxs("div",{className:`mobile-page-header-inner ${g?"show":"hide"}`,children:[e.jsx("div",{className:"mobile-page-header-left",children:m?e.jsx("button",{className:"icon-link",onClick:p,"aria-label":"Back",title:"Back",style:{padding:4},children:e.jsx(ke,{size:18})}):e.jsx(B,{to:"/profile",className:"icon-link","aria-label":"Profile",children:n!=null&&n.avatar_url?e.jsx("img",{src:n.avatar_url,width:22,height:22,style:{borderRadius:"50%"}}):e.jsx("span",{style:{display:"inline-block",width:22,height:22,borderRadius:"50%",background:"rgba(255,255,255,0.2)"}})})}),t?e.jsx("div",{className:"mobile-page-header-title",children:t}):null]}),e.jsx("div",{className:"mobile-ptr-indicator","aria-hidden":"true",style:{opacity:u||h>4?1:0,transform:`translate(-50%, calc(-100% + ${Math.min(h,70)}px))`},children:e.jsx("div",{className:`mobile-ptr-spinner ${u?"spin":h>60?"ready":""}`})})]})}function Qt({readyCount:t}){return t===null?null:e.jsx("div",{className:"site-badge","aria-hidden":!1,children:e.jsxs("div",{className:"label",children:[t," videos ready"]})})}function Yt(){const t=ie(),{lastSection:a}=re(),n=t.pathname==="/"||t.pathname==="/about",l=t.pathname==="/editor",x=t.pathname.startsWith("/mp/")||!n&&!t.pathname.startsWith("/md/")&&a==="mappi",o=t.pathname.startsWith("/md/")||!n&&!t.pathname.startsWith("/mp/")&&a==="moddi",g=t.pathname.startsWith("/md/queues/")&&t.pathname!=="/md/queues";return{isNeutralPage:n,isEditor:l,isMappi:x,isModdi:o,isQueueDetail:g}}function Jt(t){const a=le(),n=ie(),{setPreviousLocation:l}=re(),x=v.useRef(0),o=v.useRef(0),g=v.useRef(null),j=500,h=2e3;return v.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]),u=>{u.preventDefault();const _=Date.now();if(!(_<o.current)){if(g.current&&x.current>0){const S=_-x.current;if(S<j&&S>0){clearTimeout(g.current),g.current=null,o.current=_+h,x.current=0,l(n.pathname),a("/editor");return}}g.current&&(clearTimeout(g.current),g.current=null),x.current=_,g.current=setTimeout(()=>{o.current=Date.now()+h,g.current=null,x.current=0,a(t?"/mp/feed":"/md/feed")},j)}}}function Gt(){const t=ie(),{notify:a}=oe(),{data:n}=ce(),{lastSection:l,setLastSection:x}=re(),{isNeutralPage:o,isEditor:g,isMappi:j,isModdi:h}=Yt(),E=Jt(h);y.useEffect(()=>{t.pathname.startsWith("/mp/")?x("mappi"):t.pathname.startsWith("/md/")&&x("moddi")},[t.pathname,x]);const[u,_]=y.useState(null);y.useEffect(()=>{!n||!n.is_mod||(async()=>{try{const m=await M(A.admin.debugState,{requireAuth:!1}),p=Array.isArray(m==null?void 0:m.counts)?m.counts.find(d=>String(d.status)==="ready"):null;p&&_(Number(p.c)||0)}catch{}})()},[n]),y.useEffect(()=>{n&&!localStorage.getItem("welcomed")&&(a(`Welcome, ${n.username}!`,{durationMs:1e4,variant:"success"}),localStorage.setItem("welcomed","1"))},[n,a]),y.useEffect(()=>{if(typeof window>"u"||!ne()||t.pathname==="/editor")return;const p=document.querySelector(".page");p&&(p.scrollTop=0)},[t.pathname]);const{showMobileHeader:S,headerTitle:I}=y.useMemo(()=>{const m=t.pathname;if(m==="/"||m==="/about"||m==="/editor"||m==="/mp/discover")return{showMobileHeader:!1,headerTitle:""};const p=m.split("/").filter(Boolean),d=p[0]||"",c=p[1]||"";if(d==="mp"){if(c==="discover")return{showMobileHeader:!0,headerTitle:"Discover"};if(c==="feed")return{showMobileHeader:!0,headerTitle:p.length>2?"Post":"Feed"}}if(d==="md"){if(c==="feed")return{showMobileHeader:!0,headerTitle:p.length>2?"Post":"Feed"};if(c==="queues")return{showMobileHeader:!0,headerTitle:p.length>2?"Queue":"Queues"};if(c==="notifications")return{showMobileHeader:!0,headerTitle:"Notifications"}}return d==="profile"?{showMobileHeader:!0,headerTitle:"Profile"}:m==="/settings"?{showMobileHeader:!0,headerTitle:"Settings"}:m==="/moderation"?{showMobileHeader:!0,headerTitle:"Moderation"}:{showMobileHeader:!0,headerTitle:""}},[t.pathname]);return e.jsxs("div",{className:"app-shell","data-section":h?"moddi":j?"mappi":l==="moddi"?"moddi":l==="mappi"?"mappi":void 0,children:[e.jsx(pt,{paused:t.pathname==="/editor"}),e.jsx($t,{isNeutralPage:o,isEditor:g,isMappi:j,isModdi:h,onCoinFlipClick:E}),e.jsxs("main",{className:`page ${t.pathname==="/editor"||t.pathname==="/mp/discover"?"fullscreen":""}`,children:[S&&e.jsx(Ot,{title:I}),t.pathname==="/about"||t.pathname==="/settings"?e.jsx("div",{className:"card",children:e.jsx(je,{})}):e.jsx(je,{})]}),t.pathname!=="/editor"&&e.jsx(e.Fragment,{children:e.jsx(Qt,{readyCount:u})}),e.jsx(Ft,{})]})}function Vt(){const{data:t,isLoading:a}=ce(),n=!!t;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes shimmer {
          0% { background-position: -1000px 0; }
          100% { background-position: 1000px 0; }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-20px); }
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .landing-container {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 80px 24px 24px;
          overflow-y: auto;
          z-index: 1;
        }
        
        .landing-hero {
          text-align: center;
          max-width: 900px;
          width: 100%;
          animation: fadeInUp 0.8s ease-out;
        }
        
        .landing-title {
          font-size: clamp(48px, 8vw, 96px);
          font-weight: 700;
          line-height: 1.1;
          margin: 0 0 24px;
          background: linear-gradient(135deg, #7dd3fc 0%, #a78bfa 50%, #34d399 100%);
          background-size: 200% 200%;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          animation: shimmer 3s ease-in-out infinite, fadeInUp 0.8s ease-out 0.2s both;
          letter-spacing: -0.02em;
        }
        
        .landing-subtitle {
          font-size: clamp(18px, 2.5vw, 28px);
          color: var(--muted);
          margin: 0 0 64px;
          font-weight: 400;
          animation: fadeInUp 0.8s ease-out 0.4s both;
          opacity: 0.9;
        }
        
        .landing-actions {
          display: flex;
          gap: 24px;
          justify-content: center;
          flex-wrap: wrap;
          animation: fadeInUp 0.8s ease-out 0.6s both;
        }
        
        .landing-btn {
          padding: 20px 32px;
          font-size: 20px;
          font-weight: 700;
          text-decoration: none;
          border-radius: 10px;
          transition: background 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          min-width: 180px;
          border: 1px solid transparent;
          cursor: pointer;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-smooth: always;
        }
        
        .landing-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        .landing-btn-primary {
          background: #ffffff;
          color: #0b0d10;
          border: 1px solid rgba(0, 0, 0, 0.15);
        }
        
        .landing-btn-primary:hover {
          background: linear-gradient(90deg, rgba(255,255,255,1), rgba(248,249,255,0.98));
          border-color: rgba(0, 0, 0, 0.18);
          box-shadow: 0 1px 0 rgba(255,255,255,0.25) inset, 0 0 0 1px rgba(255,255,255,0.02) inset;
        }
        
        .landing-btn-secondary {
          background: #1f2430;
          color: var(--text);
          border: 1px solid rgba(255, 255, 255, 0.12);
        }
        
        .landing-btn-secondary:hover {
          background: linear-gradient(90deg, rgba(125,211,252,0.14), rgba(167,139,250,0.16));
          border-color: rgba(255, 255, 255, 0.18);
        }
        
        .landing-glow {
          position: absolute;
          width: 600px;
          height: 600px;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(125, 211, 252, 0.15) 0%, transparent 70%);
          pointer-events: none;
          animation: pulse 4s ease-in-out infinite;
          z-index: -1;
        }
        
        .landing-glow-1 {
          top: 10%;
          left: 10%;
          animation-delay: 0s;
        }
        
        .landing-glow-2 {
          bottom: 10%;
          right: 10%;
          background: radial-gradient(circle, rgba(167, 139, 250, 0.15) 0%, transparent 70%);
          animation-delay: 2s;
        }
        
        .landing-subtitle-desktop {
          display: block;
        }
        
        .landing-subtitle-mobile {
          display: none;
        }
        
        .landing-actions-desktop {
          display: flex;
        }
        
        .landing-actions-mobile {
          display: none;
        }
        
        @media (max-width: 768px) {
          .landing-container {
            padding: 60px 16px 16px;
          }
          
          .landing-actions {
            flex-direction: column;
            width: 100%;
          }
          
          .landing-btn {
            width: 100%;
            min-width: unset;
            padding: 18px 24px;
            font-size: 18px;
          }
          
          .landing-subtitle-desktop {
            display: none;
          }
          
          .landing-subtitle-mobile {
            display: block;
          }
          
          .landing-actions-desktop {
            display: none;
          }
          
          .landing-actions-mobile {
            display: flex;
          }
        }
      `}),e.jsxs("div",{className:"landing-container",children:[e.jsx("div",{className:"landing-glow landing-glow-1"}),e.jsx("div",{className:"landing-glow landing-glow-2"}),e.jsxs("div",{className:"landing-hero",children:[e.jsx("h1",{className:"landing-title",children:"mappi!"}),e.jsx("p",{className:"landing-subtitle landing-subtitle-desktop",children:"Navigate to.."}),!n&&e.jsx("p",{className:"landing-subtitle landing-subtitle-mobile",children:"You have to be logged in to use the site."}),n&&e.jsx("p",{className:"landing-subtitle landing-subtitle-mobile",children:"Navigate to.."}),e.jsxs("div",{className:"landing-actions landing-actions-desktop",children:[e.jsx(B,{to:"/mp/discover",className:"landing-btn landing-btn-secondary",children:"mappi.ng"}),e.jsx(B,{to:"/md/feed",className:"landing-btn landing-btn-secondary",children:"moddi.ng"})]}),!n&&e.jsx("div",{className:"landing-actions landing-actions-mobile",children:e.jsx("button",{className:"landing-btn landing-btn-primary",onClick:()=>{window.location.href=Ee+A.auth.login},disabled:a,children:a?"Checking…":"Login with osu!"})}),n&&e.jsxs("div",{className:"landing-actions landing-actions-mobile",children:[e.jsx(B,{to:"/mp/discover",className:"landing-btn landing-btn-secondary",children:"mappi.ng"}),e.jsx(B,{to:"/md/feed",className:"landing-btn landing-btn-secondary",children:"moddi.ng"})]})]})]})]})}function Ne(t){if(!t)return"standard";const a=String(t).toLowerCase().trim();return a==="osu"||a==="0"||a==="standard"?"standard":a==="taiko"||a==="1"?"taiko":a==="catch"||a==="fruits"||a==="2"?"catch":a==="mania"||a==="3"?"mania":"standard"}const Kt=({open:t,onClose:a,videoId:n,initialDescription:l,initialBeatmapUrl:x,onSave:o})=>{const[g,j]=v.useState(l||""),[h,E]=v.useState(x||""),[u,_]=v.useState(null),[S,I]=v.useState(null),[m,p]=v.useState(""),[d,c]=v.useState(!1),C=v.useRef(0);v.useEffect(()=>{t&&(j(l||""),E(x||""),_(null),I(null),p(""))},[t,l,x]),v.useEffect(()=>{if(!t)return;C.current&&window.clearTimeout(C.current);const b=(h||"").trim();if(!b){p(""),_(null),I(null);return}if(!/^https?:\/\/osu\.ppy\.sh\/(beatmapsets|beatmaps)\//i.test(b)){p(""),_(null),I(null);return}return C.current=window.setTimeout(async()=>{var N;try{let i;try{i=new URL(b)}catch{p("Invalid URL format");return}const L=i.hash.match(/#osu\/(\d+)/),R=L?L[1]:null;i.hash="";const V={url:i.toString()};R&&(V.beatmap_id=R);const W=await M(A.osu.resolveBeatmap+se(V),{requireAuth:!1}),G=Array.isArray(W==null?void 0:W.diffs)?W.diffs:[];if(!G.length&&!W.setId){p("No difficulties found"),_(null),I(null);return}if(_({setId:Number(W.setId)||0,beatmapId:W.beatmapId??null,title:String(W.title||""),artist:String(W.artist||""),mapper:String(W.mapper||""),diffs:G}),G.length>0){const X=Number.isFinite(Number(W.beatmapId))?Number(W.beatmapId):Number((N=G[0])==null?void 0:N.id),D=G.find(J=>Number(J.id)===X)||G[0],Y=Ne(D==null?void 0:D.mode);I({beatmapId:Number(D==null?void 0:D.id)||null,version:String((D==null?void 0:D.version)||""),mode:Y})}p("")}catch(i){p(`Failed to resolve: ${(i==null?void 0:i.message)||"Unknown error"}`),_(null),I(null)}},400),()=>{C.current&&window.clearTimeout(C.current)}},[h,t]);const F=async()=>{if(!d){c(!0);try{await M(A.videos.update(n),{method:"PATCH",body:JSON.stringify({description:g.slice(0,100),beatmap_url:h.trim()||void 0})});const b=!!h.trim();if(u||!b)try{await M(A.videos.update(n)+"/beatmap",{method:"PATCH",body:JSON.stringify({beatmapset_id:b&&u&&u.setId>0?u.setId:null,beatmap_id:b&&(S!=null&&S.beatmapId)?S.beatmapId:null,beatmap_version:b&&(S!=null&&S.version)?S.version:null,beatmap_title:b&&(u!=null&&u.title)?u.title:null,beatmap_artist:b&&(u!=null&&u.artist)?u.artist:null,beatmap_mapper:b&&(u!=null&&u.mapper)?u.mapper:null,beatmap_url:b?h.trim():null})})}catch(N){console.warn("Failed to update beatmap metadata:",N)}o(g,h.trim()||null),a()}catch(b){alert((b==null?void 0:b.message)||"Failed to update post")}finally{c(!1)}}};return t?e.jsxs("div",{className:"overlay",role:"dialog","aria-modal":"true",onClick:b=>b.target===b.currentTarget&&a(),children:[e.jsx("div",{className:"overlay-backdrop",onClick:a}),e.jsxs("div",{className:"overlay-card",style:{maxWidth:"600px",width:"calc(100vw - 24px)"},children:[e.jsx("button",{className:"overlay-close",onClick:a,"aria-label":"Close",children:e.jsx(Ce,{size:18})}),e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsx("div",{className:"title",children:"Edit Post"}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Description (max 100 chars)"}),e.jsx("textarea",{maxLength:100,placeholder:"Description (max 100 chars)",value:g,onChange:b=>j(b.target.value),style:{height:64,resize:"vertical",background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}})]}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Beatmap URL (optional)"}),u?e.jsx("div",{className:"col",style:{gap:8},children:e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{className:"chip-btn",style:{cursor:"default"},children:[e.jsxs("strong",{style:{marginRight:6},children:[u.artist," – ",u.title]}),e.jsxs("span",{className:"muted",children:["by ",u.mapper]})]}),e.jsx("select",{value:(S==null?void 0:S.beatmapId)??u.beatmapId??void 0,onChange:b=>{const z=Number(b.target.value),N=(u==null?void 0:u.diffs.find(i=>Number(i.id)===z))||null;if(N){const i=Ne(N.mode);I({beatmapId:z,version:N.version,mode:i})}},style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"},children:u.diffs.map(b=>e.jsxs("option",{value:b.id,children:[b.version," (",b.mode,")"]},b.id))}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>{_(null),I(null),E("")},children:"Clear"})]})}):e.jsx("input",{type:"url",placeholder:"Beatmap URL (optional) e.g. https://osu.ppy.sh/beatmapsets/...",value:h,onChange:b=>E(b.target.value),style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}}),m&&e.jsx("div",{className:"muted",style:{color:"var(--danger)",fontSize:12},children:m})]}),e.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn secondary",onClick:a,disabled:d,children:"Cancel"}),e.jsx("button",{className:"btn",onClick:F,disabled:d,children:d?"Saving...":"Save"})]})]})]})]}):null};function we(){const t=tt(),a=le(),{notify:n}=oe(),[l,x]=v.useState(null),[o,g]=v.useState(null),[j,h]=v.useState(""),[E,u]=v.useState([]),[_,S]=v.useState([]),[I,m]=v.useState([]),[p,d]=v.useState(""),[c,C]=v.useState(null),[F,b]=v.useState([]),[z,N]=v.useState(null),[i,L]=v.useState(""),[R,$]=v.useState([]),[V,W]=v.useState(null),[G,X]=v.useState(!1),D=v.useMemo(()=>{const r=t.id?Number(t.id):null;return r?l?l.id===r:!1:!0},[t.id,l]);function Y(r){const T=r.stream_uid||String(r.id),k=t.id?`/profile/${t.id}`:"/profile";a(`/mp/feed/${T}`,{state:{returnTo:k}})}v.useEffect(()=>{(async()=>{try{const r=await M(A.auth.me,{requireAuth:!1});x(r),r&&Array.isArray(r.inspirations)&&b(r.inspirations)}catch(r){h((r==null?void 0:r.message)||"Not logged in")}})()},[]),v.useEffect(()=>{(async()=>{try{const r=t.id?Number(t.id):null;if(r){const T=await M(A.users.get(r),{requireAuth:!1});g(T),d(T.about||""),Array.isArray(T.inspirations)&&b(T.inspirations);const k=await M(A.users.videos(r)+se({limit:"60"}),{requireAuth:!1});m(k.items||[]);const U=await M(A.users.likes(r)+se({limit:"60"}),{requireAuth:!1});S(U.items||[])}else{if(!l)return;g(l),d(l.about||""),Array.isArray(l.inspirations)&&b(l.inspirations);const T=await M(A.users.myVideos+se({limit:"50"}),{requireAuth:!1});u(T.items||[]);const k=await M(A.users.likes(l.id)+se({limit:"60"}),{requireAuth:!1});S(k.items||[])}}catch{}})()},[t.id,l]),v.useEffect(()=>{X(!1)},[o==null?void 0:o.id]);async function J(r){try{const k=(await M(A.auth.me,{method:"PATCH",body:JSON.stringify({inspirations:r})})).user||o;g(k),Array.isArray(k==null?void 0:k.inspirations)&&b(k.inspirations),t.id||x(k)}catch{}}return v.useEffect(()=>{let r;return z!==null&&i.trim().length>=2?r=setTimeout(async()=>{try{const T=await M(A.osu.usersSearch(i),{requireAuth:!1});$(Array.isArray(T.items)?T.items:[])}catch{}},250):$([]),()=>{r&&clearTimeout(r)}},[i,z]),e.jsxs("div",{className:"feed-container profile-page",style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0 16px"},children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("div",{className:"row wrap",style:{alignItems:"center"},children:o?e.jsxs(e.Fragment,{children:[o.avatar_url&&e.jsx("img",{src:o.avatar_url,width:48,height:48,style:{borderRadius:"50%"}}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"title",style:{display:"flex",alignItems:"center",gap:8},children:[o.username,o.osu_user_id&&e.jsx("a",{href:`https://osu.ppy.sh/users/${o.osu_user_id}`,target:"_blank",rel:"noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",color:"var(--text)",opacity:.7,cursor:"pointer",padding:0,textDecoration:"none",transition:"opacity 0.2s ease"},onMouseEnter:r=>r.currentTarget.style.opacity="1",onMouseLeave:r=>r.currentTarget.style.opacity="0.7",title:"View osu! profile","aria-label":"View osu! profile",children:e.jsx(st,{size:16})})]}),e.jsxs("div",{className:"muted",children:["ID: ",o.id]})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[!D&&F.length>0&&e.jsx("span",{className:"muted",style:{fontSize:12},children:"inspired by:"}),F.map((r,T)=>D?e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>W(r.id),onMouseLeave:()=>W(null),children:[e.jsx("button",{className:"insp-avatar",onClick:()=>{if(!confirm("Remove this inspiration?"))return;const k=F.filter((U,te)=>te!==T);b(k),J(k)},children:e.jsx("img",{src:r.avatar_url,alt:r.username})}),V===r.id&&e.jsxs("div",{className:"insp-tooltip",children:[r.username," — click to remove"]})]},r.id):e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>W(r.id),onMouseLeave:()=>W(null),children:[e.jsx("a",{href:`https://osu.ppy.sh/users/${r.id}`,target:"_blank",rel:"noreferrer",className:"insp-avatar link",children:e.jsx("img",{src:r.avatar_url,alt:r.username})}),V===r.id&&e.jsx("div",{className:"insp-tooltip",children:r.username})]},r.id)),D&&F.length<3&&new Array(3-F.length).fill(0).map((r,T)=>e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>W(-T-1),onMouseLeave:()=>W(null),children:[e.jsx("button",{className:"insp-add",onClick:()=>{N(T),L(""),$([])},children:"+"}),V===-T-1&&e.jsx("div",{className:"insp-tooltip",children:"Add inspiration"}),z===T&&e.jsxs("div",{className:"insp-pop",role:"dialog","aria-label":"Search osu! users",children:[e.jsx("input",{autoFocus:!0,placeholder:"Search username",value:i,onChange:k=>L(k.target.value)}),e.jsxs("div",{className:"insp-results",children:[R.length===0&&i.trim().length>=2&&e.jsx("div",{className:"muted",style:{padding:"6px 8px"},children:"No results"}),R.map(k=>e.jsxs("button",{className:"insp-result",onClick:()=>{if(l&&Number(l.osu_user_id)===Number(k.id)){n("Kinda based, but no.",{variant:"warn"}),N(null);return}if(F.some(te=>te.id===k.id)){N(null);return}const U=[...F,{id:k.id,username:k.username,avatar_url:k.avatar_url}].slice(0,3);b(U),N(null),J(U)},children:[e.jsx("img",{src:k.avatar_url,alt:"avatar"}),e.jsx("span",{children:k.username})]},k.id))]}),e.jsx("button",{className:"insp-close",onClick:()=>N(null),children:"Close"})]})]},`slot-${T}`))]}),D&&e.jsx("div",{className:"muted",style:{fontSize:12},children:"Who inspires you?"})]})]}):e.jsx("div",{className:"muted",children:j||"Loading…"})}),e.jsxs("div",{className:"col",style:{marginTop:12,gap:4},children:[e.jsx("div",{className:"title",children:"About"}),D?e.jsx("div",{className:"col",style:{gap:6},children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("textarea",{value:p,onChange:r=>d(r.target.value),rows:3,maxLength:1e3,placeholder:"Write something about yourself (max 1000 chars)",style:{paddingRight:36}}),e.jsx("button",{className:"icon-link",onClick:async()=>{try{const r=await M(A.auth.me,{method:"PATCH",body:JSON.stringify({about:p})});g(r.user||o),x(r.user||l)}catch{}},"aria-label":"Save about",title:"Save",style:{position:"absolute",right:8,bottom:8,padding:4,color:"rgba(255,255,255,0.55)"},children:e.jsx(pe,{size:16})})]})}):(()=>{const r=((o==null?void 0:o.about)||"").trim()||"No bio.",T=r.length>200,k=T&&!G?r.slice(0,200)+"...":r;return e.jsxs("div",{className:"col",style:{gap:4},children:[e.jsx("div",{className:"muted",style:{whiteSpace:"pre-wrap"},children:k}),T&&e.jsx("button",{onClick:()=>X(!G),style:{display:"flex",alignItems:"center",gap:4,background:"transparent",border:"none",color:"var(--muted)",cursor:"pointer",padding:0,fontSize:14,fontFamily:"inherit",marginTop:4},children:G?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Show less"}),e.jsx(it,{size:14})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Show more"}),e.jsx(Te,{size:14})]})})]})})()]})]}),e.jsxs("div",{className:"profile-tabs-unified",children:[e.jsxs("div",{className:"profile-tabs-header",role:"tablist","aria-label":"Profile sections",children:[e.jsx("button",{role:"tab","aria-selected":!0,className:"profile-tab active","data-tab":"uploads",onClick:r=>{const T=r.currentTarget.closest(".profile-tabs-unified");T.querySelectorAll(".profile-tab").forEach(U=>{U.classList.remove("active"),U.setAttribute("aria-selected","false")}),r.currentTarget.classList.add("active"),r.currentTarget.setAttribute("aria-selected","true"),T.querySelector(".profile-tabs-content").setAttribute("data-active","uploads")},children:"Uploads"}),e.jsx("button",{role:"tab","aria-selected":!1,className:"profile-tab","data-tab":"likes",onClick:r=>{const T=r.currentTarget.closest(".profile-tabs-unified");T.querySelectorAll(".profile-tab").forEach(U=>{U.classList.remove("active"),U.setAttribute("aria-selected","false")}),r.currentTarget.classList.add("active"),r.currentTarget.setAttribute("aria-selected","true"),T.querySelector(".profile-tabs-content").setAttribute("data-active","likes")},children:"Likes"})]}),e.jsxs("div",{className:"profile-tabs-content","data-active":"uploads",children:[e.jsx("div",{className:"panel uploads",hidden:!1,children:e.jsx("div",{className:"profile-grid-container",children:e.jsxs("div",{className:"recent-grid cols3",children:[(D?E:I).length===0&&e.jsx("div",{className:"profile-empty-state",children:"No uploads yet."}),(D?E:I).map(r=>(D&&o?(o.id,o.username,o.avatar_url,o.is_admin,o.is_mod):r.uploader,e.jsxs("button",{className:"recent-cell",onClick:()=>Y({...r}),children:[r.poster_url?e.jsx("img",{className:"recent-thumb",src:r.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsx("div",{className:"cell-footer",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(at,{size:12}),e.jsx("span",{children:r.likes_count??0})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(nt,{size:12}),e.jsx("span",{children:r.comments_count??0})]})]})})]},r.id)))]})})}),e.jsx("div",{className:"panel likes",hidden:!0,children:e.jsx("div",{className:"profile-grid-container",children:e.jsxs("div",{className:"recent-grid cols3",children:[_.length===0&&e.jsx("div",{className:"profile-empty-state",children:"No likes yet."}),_.map(r=>{var T,k;return e.jsxs("button",{className:"recent-cell",onClick:()=>Y(r),children:[r.poster_url?e.jsx("img",{className:"recent-thumb",src:r.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsxs("div",{className:"cell-footer",children:[((T=r.uploader)==null?void 0:T.avatar_url)&&e.jsx("img",{className:"cell-avatar",src:r.uploader.avatar_url,alt:"avatar"}),e.jsx("span",{className:"cell-name",children:(k=r.uploader)==null?void 0:k.username})]})]},r.id)})]})})})]})]}),c&&e.jsx(Kt,{open:!!c,onClose:()=>C(null),videoId:c.id,initialDescription:c.description,initialBeatmapUrl:c.beatmap_url,onSave:(r,T)=>{u(E.map(k=>k.id===c.id?{...k,description:r||null,beatmap_url:T}:k)),C(null)}}),e.jsx("style",{children:`
        .insp-avatar { width: 32px; height: 32px; border-radius: 9999px; padding: 0; border: none; overflow: hidden; cursor: pointer; background: rgba(255,255,255,0.06); display: inline-flex; align-items: center; justify-content: center; }
        .insp-avatar.link { background: transparent; border: 1px solid rgba(255,255,255,0.08); }
        .insp-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .insp-add { width: 32px; height: 32px; border-radius: 9999px; border: 1px dashed rgba(255,255,255,0.25); background: transparent; color: #e5e7eb; font-weight: 700; cursor: pointer; }
        .insp-add:hover { border-color: rgba(255,255,255,0.5); }
        .insp-tooltip {
          position: absolute;
          top: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
          background: rgba(18, 20, 24, 0.95);
          color: var(--text, #e5e7eb);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 6px;
          padding: 6px 10px;
          font-size: 14px;
          white-space: nowrap;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          z-index: 10000;
          pointer-events: none;
          font-family: 'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif;
        }
        .insp-tooltip::after {
          content: '';
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 5px solid transparent;
          border-right: 5px solid transparent;
          border-bottom: 5px solid rgba(18, 20, 24, 0.95);
        }
        .insp-pop { position: absolute; right: 0; top: 40px; width: 260px; background: var(--panel); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; box-shadow: 0 12px 30px rgba(0,0,0,0.4); padding: 8px; z-index: 10; }
        .insp-pop input { width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: var(--panel-dark); color: #fff; outline: none; box-sizing: border-box; display: block; }
        .insp-results { margin-top: 6px; max-height: 220px; overflow: auto; display: grid; gap: 4px; }
        .insp-result { display: grid; grid-template-columns: 24px 1fr; gap: 8px; align-items: center; padding: 6px 8px; border-radius: 8px; border: 1px solid transparent; background: transparent; color: #e5e7eb; cursor: pointer; text-align: left; }
        .insp-result:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .insp-result img { width: 24px; height: 24px; border-radius: 9999px; object-fit: cover; }
        .insp-close { margin-top: 6px; width: 100%; padding: 6px 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.04); color: #e5e7eb; cursor: pointer; }
      `})]})}function Xt(){var T,k,U,te,ae;const[t,a]=v.useState(null),[n,l]=v.useState([]),[x,o]=v.useState(""),[g,j]=v.useState([]),[h,E]=v.useState(null),[u,_]=v.useState([]),[S,I]=v.useState("all"),[m,p]=v.useState("approvals"),[d,c]=v.useState(null),[C,F]=v.useState(""),[b,z]=v.useState(!1),{notify:N}=oe(),[i,L]=v.useState(null),[R,$]=v.useState(!1);v.useEffect(()=>{(async()=>{try{const s=await M(A.auth.me,{requireAuth:!1});if(a(s),s!=null&&s.is_admin)try{const w=await M(A.admin.settingsModeration,{requireAuth:!1});c(!!w.require_approval)}catch{}}catch{}try{const s=await M(A.admin.videosPending+se({limit:"50"}),{requireAuth:!1});l(s.items||[])}catch{}})()},[]);async function V(){$(!0);try{const s=await M(A.admin.analytics,{requireAuth:!1});L(s)}finally{$(!1)}}async function W(){try{const s=await M(A.admin.usersSearch(x),{requireAuth:!1});j(s.items||[])}catch{}}async function G(s){E(s),_([]);try{const w=await M(A.admin.userVideos(s.id)+se({limit:"50"}),{requireAuth:!1});_(w.items||[])}catch{}}async function X(s,w){try{const K=await M(A.admin.user(s.id),{method:"PATCH",body:JSON.stringify({is_mod:w})}),O=(K==null?void 0:K.user)||{...s,is_mod:w};N(w?"Granted moderation":"Revoked moderation",{variant:w?"success":"warn"}),E(O),j(g.map(ee=>ee.id===s.id?O:ee))}catch{alert("Failed to update")}}const D=!!(t!=null&&t.is_admin||t!=null&&t.is_mod),Y=!!(t!=null&&t.is_admin);if(!D)return e.jsx("div",{className:"muted",children:"You do not have access."});const J=n.filter(s=>!s.flagged_only),r=n.filter(s=>!!s.flagged_only);return e.jsx("div",{className:"feed-container moderation-container",style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0 16px"},children:e.jsxs("div",{className:"feed-header",style:{paddingTop:12,paddingBottom:0},children:[e.jsxs("div",{className:"moderation-header",children:[e.jsx("div",{className:"moderation-title",children:"Moderation"}),e.jsx("div",{className:"muted moderation-description",children:"Review approvals, manage users, and monitor moderation metrics from one place."})]}),e.jsxs("div",{className:"profile-tabs-unified",children:[e.jsxs("div",{className:"profile-tabs-header",role:"tablist","aria-label":"Moderation tabs",style:{display:"flex",flexWrap:ne()?"nowrap":"wrap",gap:ne()?"2px":"4px",overflowX:ne()?"auto":void 0},children:[e.jsx("button",{role:"tab","aria-selected":m==="approvals",className:`profile-tab ${m==="approvals"?"active":""}`,"data-tab":"approvals",onClick:s=>{const w=s.currentTarget.closest(".profile-tabs-unified");w.querySelectorAll(".profile-tab").forEach(O=>{O.classList.remove("active"),O.setAttribute("aria-selected","false")}),s.currentTarget.classList.add("active"),s.currentTarget.setAttribute("aria-selected","true"),w.querySelector(".profile-tabs-content").setAttribute("data-active","approvals"),p("approvals")},children:"Approvals"}),(Y||(t==null?void 0:t.is_mod))&&e.jsx("button",{role:"tab","aria-selected":m==="manage",className:`profile-tab ${m==="manage"?"active":""}`,"data-tab":"manage",onClick:s=>{const w=s.currentTarget.closest(".profile-tabs-unified");w.querySelectorAll(".profile-tab").forEach(O=>{O.classList.remove("active"),O.setAttribute("aria-selected","false")}),s.currentTarget.classList.add("active"),s.currentTarget.setAttribute("aria-selected","true"),w.querySelector(".profile-tabs-content").setAttribute("data-active","manage"),p("manage")},children:"Manage"}),(Y||(t==null?void 0:t.is_mod))&&e.jsx("button",{role:"tab","aria-selected":m==="analytics",className:`profile-tab ${m==="analytics"?"active":""}`,"data-tab":"analytics",onClick:s=>{const w=s.currentTarget.closest(".profile-tabs-unified");w.querySelectorAll(".profile-tab").forEach(O=>{O.classList.remove("active"),O.setAttribute("aria-selected","false")}),s.currentTarget.classList.add("active"),s.currentTarget.setAttribute("aria-selected","true"),w.querySelector(".profile-tabs-content").setAttribute("data-active","analytics"),p("analytics"),i||V()},children:"Analytics"}),(Y||(t==null?void 0:t.is_mod))&&e.jsx("button",{role:"tab","aria-selected":m==="message",className:`profile-tab ${m==="message"?"active":""}`,"data-tab":"message",onClick:s=>{const w=s.currentTarget.closest(".profile-tabs-unified");w.querySelectorAll(".profile-tab").forEach(O=>{O.classList.remove("active"),O.setAttribute("aria-selected","false")}),s.currentTarget.classList.add("active"),s.currentTarget.setAttribute("aria-selected","true"),w.querySelector(".profile-tabs-content").setAttribute("data-active","message"),p("message")},children:"Message"})]}),e.jsxs("div",{className:"profile-tabs-content","data-active":m,children:[e.jsx("div",{className:"panel approvals",hidden:m!=="approvals",children:e.jsxs("div",{className:"col",style:{gap:24,paddingTop:8},children:[e.jsxs("div",{className:"col",style:{flex:1,minWidth:0},children:[e.jsxs("div",{className:"row-between",style:{alignItems:"center",flexWrap:"wrap",gap:8},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Pending approvals"}),e.jsxs("div",{className:"muted",style:{fontSize:12},children:[J.length," item(s)"]})]}),e.jsxs("div",{className:"scroll-panel sm",style:{maxHeight:"60vh"},children:[J.length===0&&e.jsx("div",{className:"muted",style:{padding:"12px"},children:"Nothing pending."}),J.map(s=>e.jsxs("div",{className:"col moderation-video-card",children:[e.jsxs("div",{className:"row",style:{alignItems:"center",minWidth:0,gap:12},children:[s.poster_url?e.jsx("img",{src:s.poster_url,width:80,height:45,style:{objectFit:"cover",borderRadius:8,flexShrink:0}}):e.jsx("div",{style:{width:80,height:45,borderRadius:8,background:"#0f1217",flexShrink:0}}),e.jsxs("div",{className:"col",style:{minWidth:0,flex:1,gap:6},children:[e.jsx("div",{style:{fontSize:14,lineHeight:1.4,wordBreak:"break-word"},title:s.description||"",children:s.description||"No description."}),e.jsxs("div",{className:"muted",style:{fontSize:12,lineHeight:1.4},children:[e.jsxs("div",{children:["uploader: ",s.username]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:2},children:[s.needs_review?e.jsx("span",{style:{color:"#f59e0b"},children:"(needs review)"}):e.jsx("span",{style:{color:"#60a5fa"},children:"(pending)"}),typeof s.flags_count=="number"&&s.flags_count>0?e.jsxs("span",{className:"muted",children:["• ",s.flags_count," reports"]}):null]})]})]})]}),e.jsxs("div",{className:"row wrap",style:{gap:8},children:[e.jsx("button",{className:"btn secondary",style:{flex:1,minWidth:"calc(33.333% - 6px)"},onClick:async()=>{try{await M(A.admin.videosReject(s.id),{method:"POST"}),l(n.filter(w=>w.id!==s.id)),N("Rejected",{variant:"warn"})}catch{}},children:"Reject"}),e.jsx("button",{className:"btn secondary",style:{flex:1,minWidth:"calc(33.333% - 6px)"},onClick:async()=>{try{await M(A.admin.videosApprove(s.id),{method:"POST"}),l(n.filter(w=>w.id!==s.id)),N("Approved",{variant:"success"})}catch{}},children:"Approve"}),e.jsx("button",{className:"btn secondary",style:{flex:1,minWidth:"calc(33.333% - 6px)"},onClick:async()=>{if(confirm("Permanently delete this video?"))try{await M(A.videos.delete(s.id),{method:"DELETE"}),l(n.filter(w=>w.id!==s.id)),N("Deleted",{variant:"warn"})}catch{alert("Delete failed")}},children:"Delete"})]})]},s.id))]})]}),e.jsxs("div",{className:"col",style:{flex:1,minWidth:0},children:[e.jsxs("div",{className:"row-between",style:{alignItems:"center",flexWrap:"wrap",gap:8},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Flagged (FYI)"}),e.jsxs("div",{className:"muted",style:{fontSize:12},children:[r.length," item(s)"]})]}),e.jsxs("div",{className:"scroll-panel sm",style:{maxHeight:"60vh"},children:[r.length===0&&e.jsx("div",{className:"muted",style:{padding:"12px"},children:"No flagged items."}),r.map(s=>e.jsxs("div",{className:"col moderation-video-card flagged",children:[e.jsxs("div",{className:"row",style:{alignItems:"center",minWidth:0,gap:12},children:[s.poster_url?e.jsx("img",{src:s.poster_url,width:80,height:45,style:{objectFit:"cover",borderRadius:8,flexShrink:0}}):e.jsx("div",{style:{width:80,height:45,borderRadius:8,background:"#0f1217",flexShrink:0}}),e.jsxs("div",{className:"col",style:{minWidth:0,flex:1,gap:6},children:[e.jsx("div",{style:{fontSize:14,lineHeight:1.4,wordBreak:"break-word"},title:s.description||"",children:s.description||"No description."}),e.jsxs("div",{className:"muted",style:{fontSize:12,lineHeight:1.4},children:[e.jsxs("div",{children:["uploader: ",s.username]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:2},children:[e.jsx("span",{style:{color:"#9ca3af"},children:"(flagged)"}),typeof s.flags_count=="number"&&s.flags_count>0?e.jsxs("span",{className:"muted",children:["• ",s.flags_count," reports"]}):null]})]})]})]}),e.jsx("div",{className:"row",children:e.jsx("button",{className:"btn secondary",style:{width:"100%"},onClick:async()=>{if(confirm("Permanently delete this video?"))try{await M(A.videos.delete(s.id),{method:"DELETE"}),l(n.filter(w=>w.id!==s.id)),N("Deleted",{variant:"warn"})}catch{alert("Delete failed")}},children:"Delete"})})]},s.id))]}),e.jsx("div",{className:"muted",style:{fontSize:12,marginTop:8,padding:"0 4px"},children:"Flagged items don't require approval; use Delete only if necessary."})]})]})}),e.jsx("div",{className:"panel manage",hidden:m!=="manage",children:e.jsxs("div",{className:"col",style:{gap:24,paddingTop:8},children:[e.jsxs("div",{className:"col",style:{minWidth:0},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)",marginBottom:8},children:"User management"}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("input",{type:"text",placeholder:"Search username or ID",value:x,onChange:s=>o(s.target.value),onKeyDown:s=>{s.key==="Enter"&&W()},className:"moderation-input",style:{width:"100%",fontSize:16,color:"inherit"}}),e.jsx("button",{className:"btn secondary",onClick:W,style:{width:"100%",minHeight:"44px"},children:"Search"})]}),e.jsx("div",{className:"scroll-panel sm",style:{marginTop:12,maxHeight:"40vh"},children:e.jsx("div",{className:"col",style:{gap:12},children:g.map(s=>e.jsxs("button",{className:"btn secondary moderation-user-result",onClick:()=>G(s),style:{justifyContent:"flex-start",textAlign:"left",alignItems:"center"},children:[s.avatar_url&&e.jsx("img",{src:s.avatar_url,width:24,height:24,style:{borderRadius:"50%",flexShrink:0}}),e.jsxs("div",{className:"col",style:{flex:1,minWidth:0,gap:2,alignItems:"flex-start"},children:[e.jsx("span",{style:{fontWeight:500},children:s.username}),e.jsxs("span",{className:"muted",style:{fontSize:12},children:["id ",s.id," • osu ",s.osu_user_id]})]}),s.is_admin?e.jsx("span",{style:{color:"var(--accent)",fontSize:12,flexShrink:0},children:"admin"}):s.is_mod?e.jsx("span",{style:{color:"var(--accent)",fontSize:12,flexShrink:0},children:"mod"}):s.is_blacklisted?e.jsx("span",{style:{color:"#f87171",fontSize:12,flexShrink:0},children:"blacklisted"}):null]},s.id))})})]}),h?e.jsxs("div",{className:"col",style:{minWidth:0,borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:24,gap:16},children:[e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",gap:12,flexWrap:"wrap"},children:[h.avatar_url&&e.jsx("img",{src:h.avatar_url,width:40,height:40,style:{borderRadius:"50%",flexShrink:0}}),e.jsxs("div",{className:"col",style:{flex:1,minWidth:0,gap:4},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:h.username}),e.jsxs("div",{className:"muted",style:{fontSize:12},children:["id ",h.id," • osu ",h.osu_user_id]})]})]}),e.jsxs("div",{className:"col",style:{gap:10},children:[Y&&!h.is_admin&&(h.is_mod?e.jsx("button",{className:"btn secondary",style:{width:"100%",minHeight:"44px"},onClick:()=>X(h,!1),children:"Revoke moderation"}):e.jsx("button",{className:"btn secondary",style:{width:"100%",minHeight:"44px"},onClick:()=>X(h,!0),children:"Grant moderation"})),!h.is_admin&&(h.is_blacklisted?e.jsx("button",{className:"btn secondary",style:{width:"100%",minHeight:"44px"},onClick:async()=>{try{await M(A.admin.user(h.id),{method:"PATCH",body:JSON.stringify({is_blacklisted:!1})}),E({...h,is_blacklisted:!1}),N("User unblacklisted",{variant:"success"})}catch{alert("Failed")}},children:"Unblacklist"}):e.jsx("button",{className:"btn secondary",style:{width:"100%",minHeight:"44px"},onClick:async()=>{try{await M(A.admin.user(h.id),{method:"PATCH",body:JSON.stringify({is_blacklisted:!0})}),E({...h,is_blacklisted:!0}),N("User blacklisted",{variant:"warn"})}catch{alert("Failed")}},children:"Blacklist"}))]}),h.is_admin&&e.jsx("div",{className:"caption",style:{marginTop:4},children:"Admins always retain access"})]}),e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsxs("div",{className:"row-between",style:{alignItems:"center",flexWrap:"wrap",gap:8},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Uploads"}),e.jsxs("div",{className:"row",style:{gap:8,alignItems:"center"},children:[e.jsx("button",{className:"btn secondary compact",style:{minHeight:"36px",padding:"8px 16px"},onClick:()=>I("all"),children:"All"}),e.jsx("button",{className:"btn secondary compact",style:{minHeight:"36px",padding:"8px 16px"},onClick:()=>I("review"),children:"Review"})]})]}),e.jsxs("div",{className:"scroll-panel sm",style:{maxHeight:"50vh"},children:[u.length===0&&e.jsx("div",{className:"muted",style:{padding:"12px"},children:"No uploads."}),u.filter(s=>{if(S==="all")return!0;const w=(d?!s.approved_at:!1)&&s.status==="ready",K=!!s.needs_review;return w||K}).map(s=>e.jsxs("div",{className:"col moderation-video-card",children:[e.jsxs("div",{className:"row",style:{alignItems:"center",minWidth:0,gap:12},children:[s.poster_url?e.jsx("img",{src:s.poster_url,width:80,height:45,style:{objectFit:"cover",borderRadius:8,flexShrink:0}}):e.jsx("div",{style:{width:80,height:45,borderRadius:8,background:"#0f1217",flexShrink:0}}),e.jsxs("div",{className:"col",style:{minWidth:0,flex:1,gap:6},children:[e.jsx("div",{style:{fontSize:14,lineHeight:1.4,wordBreak:"break-word"},title:s.description||"",children:s.description||"No description."}),e.jsxs("div",{className:"muted",style:{fontSize:12,lineHeight:1.4},children:[e.jsxs("div",{children:[s.status.toUpperCase()," • ",new Date(s.created_at*1e3).toLocaleString()]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:2},children:[s.needs_review?e.jsx("span",{style:{color:"#f59e0b"},children:"(purgatory)"}):null,d&&!s.approved_at&&s.status==="ready"?e.jsx("span",{style:{color:"#60a5fa"},children:"(pending)"}):null]})]})]})]}),e.jsxs("div",{className:"row wrap",style:{gap:8,alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{className:"row",style:{gap:6,alignItems:"center"},children:[e.jsx("span",{className:"muted",style:{fontSize:14},children:s.likes_count??0}),e.jsx("span",{style:{color:"var(--accent)",fontSize:16},children:"★"})]}),e.jsxs("div",{className:"row",style:{gap:8},children:[(Y||(t==null?void 0:t.is_mod))&&(!!s.needs_review||d&&!s.approved_at&&s.status==="ready")&&e.jsx("button",{className:"btn secondary compact",onClick:async()=>{try{await M(A.admin.videosApprove(s.id),{method:"POST"}),_(u.map(w=>w.id===s.id?{...w,approved_at:Math.floor(Date.now()/1e3),needs_review:0}:w)),N("Approved",{variant:"success"})}catch{alert("Approve failed")}},children:"Approve"}),(Y||(t==null?void 0:t.is_mod))&&e.jsx("button",{className:"btn secondary compact",onClick:async()=>{if(confirm("Permanently delete this video?"))try{await M(A.videos.delete(s.id),{method:"DELETE"}),_(u.filter(w=>w.id!==s.id)),N("Deleted",{variant:"warn"})}catch{alert("Delete failed")}},children:"Delete"})]})]})]},s.id))]})]})]}):e.jsx("div",{className:"muted",style:{padding:"20px",textAlign:"center"},children:"Select a user to view details and uploads."})]})}),e.jsx("div",{className:"panel message",hidden:m!=="message",children:e.jsxs("div",{className:"col",style:{gap:24,paddingTop:8},children:[e.jsxs("div",{className:"col",style:{minWidth:0},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)",marginBottom:8},children:"Send a system message"}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("input",{type:"text",placeholder:"Search username or ID",value:x,onChange:s=>o(s.target.value),onKeyDown:s=>{s.key==="Enter"&&W()},className:"moderation-input",style:{width:"100%",fontSize:16,color:"inherit"}}),e.jsx("button",{className:"btn secondary",onClick:W,style:{width:"100%",minHeight:"44px"},children:"Search"})]}),e.jsx("div",{className:"scroll-panel sm",style:{marginTop:12,maxHeight:"30vh"},children:e.jsx("div",{className:"col",style:{gap:12},children:g.map(s=>e.jsxs("button",{className:`btn secondary moderation-user-result ${(h==null?void 0:h.id)===s.id,""}`,onClick:()=>E(s),style:{justifyContent:"flex-start",textAlign:"left",alignItems:"center",border:(h==null?void 0:h.id)===s.id?"2px solid var(--accent)":void 0},children:[s.avatar_url&&e.jsx("img",{src:s.avatar_url,width:24,height:24,style:{borderRadius:"50%",flexShrink:0}}),e.jsxs("div",{className:"col",style:{flex:1,minWidth:0,gap:2,alignItems:"flex-start"},children:[e.jsx("span",{style:{fontWeight:500},children:s.username}),e.jsxs("span",{className:"muted",style:{fontSize:12},children:["id ",s.id," • osu ",s.osu_user_id]})]}),(h==null?void 0:h.id)===s.id&&e.jsx("span",{style:{color:"var(--accent)",fontSize:12,flexShrink:0},children:"selected"})]},s.id))})})]}),e.jsxs("div",{className:"col",style:{minWidth:0,borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:24,gap:16},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Compose"}),e.jsxs("label",{className:"row",style:{alignItems:"center",gap:12,padding:"8px 0"},children:[e.jsx("input",{type:"checkbox",checked:b,onChange:s=>z(s.currentTarget.checked),style:{width:20,height:20,cursor:"pointer",minWidth:20,minHeight:20}}),e.jsx("span",{className:"muted",style:{fontSize:14},children:"Send to all users (global)"})]}),e.jsx("textarea",{placeholder:"Message (shown in notifications)",className:"moderation-input",style:{height:120,resize:"vertical",width:"100%",fontSize:16,color:"inherit",fontFamily:"inherit"},value:C,onChange:s=>F(s.target.value)}),e.jsx("button",{className:"btn secondary",style:{width:"100%",minHeight:"44px"},onClick:()=>{const s=(C||"").trim();if(!s){alert("Enter a message");return}(async()=>{try{const w={text:s,global:b};!b&&(h!=null&&h.id)&&(w.user_id=h.id),await M(A.admin.notificationsSystem,{method:"POST",body:JSON.stringify(w)}),F(""),N("Message sent",{variant:"success"})}catch{alert("Failed to send")}})()},children:"Send"}),e.jsx("div",{className:"caption",style:{marginTop:4,fontSize:12,lineHeight:1.4},children:'System messages persist for 24 hours and show an "Expires at" timestamp.'})]})]})}),e.jsx("div",{className:"panel analytics",hidden:m!=="analytics",children:e.jsxs("div",{className:"col",style:{gap:24,paddingTop:8},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Analytics"}),R&&e.jsx("div",{className:"muted",style:{padding:"12px"},children:"Loading…"}),!R&&!i&&e.jsx("div",{className:"muted",style:{padding:"12px"},children:"No data."}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"moderation-stats-grid",children:[e.jsx(Z,{label:"Users",value:i.totals.users_total}),e.jsx(Z,{label:"Admins",value:i.totals.users_admin}),e.jsx(Z,{label:"Mods",value:i.totals.users_mod}),e.jsx(Z,{label:"Blacklisted",value:i.totals.users_blacklisted}),e.jsx(Z,{label:"Videos",value:i.totals.videos_total}),e.jsx(Z,{label:"Ready",value:i.totals.videos_ready}),e.jsx(Z,{label:"Pending",value:i.totals.pending_count}),e.jsx(Z,{label:"Purgatory",value:i.totals.purgatory_count}),e.jsx(Z,{label:"Likes",value:i.totals.likes_total}),e.jsx(Z,{label:"Flags",value:i.totals.flags_total})]}),e.jsxs("div",{className:"col",style:{gap:20,marginTop:8},children:[e.jsx(me,{title:"New users (30d)",series:i.series.users,color:"#60a5fa"}),e.jsx(me,{title:"New videos (30d)",series:i.series.videos,color:"#34d399"}),((k=(T=i.stream)==null?void 0:T.graphql)==null?void 0:k.minutes_viewed)&&i.stream.graphql.minutes_viewed.length>0&&e.jsx(me,{title:"Minutes viewed (30d)",series:i.stream.graphql.minutes_viewed,color:"#f59e0b"})]}),e.jsxs("div",{className:"col",style:{gap:8,marginTop:8},children:[e.jsx("div",{className:"title",style:{fontSize:"clamp(16px, 4vw, 18px)"},children:"Feed & Stream"}),e.jsxs("div",{className:"muted",style:{fontSize:14,lineHeight:1.5},children:["Feed: ",i.feed.count," items in rotation",i.feed.cursor?` • cursor ${i.feed.cursor}`:""]}),e.jsxs("div",{className:"muted",style:{fontSize:14,lineHeight:1.5},children:["Approx. ready seconds: ",i.stream.approximate.total_duration_sec," • ready videos: ",i.stream.approximate.videos_ready]}),i.stream.api&&e.jsxs("div",{className:"muted",style:{fontSize:12,lineHeight:1.5},children:["Stream API: ",i.stream.api.ok?"ok":"unavailable",(te=(U=i.stream.api)==null?void 0:U.result_info)!=null&&te.count?` • count ${i.stream.api.result_info.count}`:"",(ae=i.stream.api)!=null&&ae.sample_status?` • sample status ${String(i.stream.api.sample_status)}`:""]})]})]})]})})]})]})]})})}function Z({label:t,value:a}){return e.jsxs("div",{className:"col moderation-stat-card",children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:t}),e.jsx("div",{className:"title",style:{fontSize:"clamp(18px, 4vw, 20px)"},children:a})]})}function me({title:t,series:a,color:n}){const[l,x]=v.useState(()=>ne());v.useEffect(()=>{const i=()=>x(ne());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const o=l?Math.min(400,window.innerWidth-48):400,g=160,j=8,h=8,E=28,u=l?36:42,_=a.map(i=>i.count),S=Math.max(1,..._),I=v.useMemo(()=>{const i=S,L=Math.pow(10,Math.floor(Math.log10(i))),R=i/L;return(R<=1?1:R<=2?2:R<=5?5:10)*L},[S]),m=o-u-h,p=g-j-E,d=v.useMemo(()=>a.map((i,L)=>{const R=u+L/Math.max(1,a.length-1)*m,$=j+(1-i.count/(I||1))*p;return[R,$]}),[a,I,m,p]),c=v.useMemo(()=>d.map((i,L)=>L===0?`M ${i[0]} ${i[1]}`:`L ${i[0]} ${i[1]}`).join(" "),[d]),C=[0,.25,.5,.75,1],F=v.useMemo(()=>{if(a.length===0)return[];const i=[0,.25,.5,.75,1].map(L=>Math.min(a.length-1,Math.round(L*(a.length-1))));return Array.from(new Set(i))},[a]),b=i=>{if(!i||i.length<10)return i||"";const L=i.slice(5,7).replace(/^0/,""),R=i.slice(8,10).replace(/^0/,"");return`${L}/${R}`};function z(i){const L=Number.isInteger(i);return i>=1e6?`${(i/1e6).toFixed(1).replace(/\.0$/,"")}M`:i>=1e3?`${(i/1e3).toFixed(1).replace(/\.0$/,"")}k`:L?String(i):i<10?i.toFixed(1):i.toFixed(1).replace(/\.0$/,"")}const N=a.length?a[a.length-1].count:0;return e.jsxs("div",{className:"col moderation-chart-card",children:[e.jsxs("div",{className:"row",style:{alignItems:"baseline",justifyContent:"space-between",marginBottom:12,flexWrap:"wrap",gap:4},children:[e.jsx("div",{className:"muted",style:{fontSize:l?13:14},children:t}),e.jsxs("div",{className:"muted",style:{fontSize:l?11:12},children:["latest: ",z(N)]})]}),e.jsx("div",{style:{width:"100%",overflowX:"auto"},children:e.jsxs("svg",{width:o,height:g,role:"img","aria-label":t,style:{display:"block"},children:[e.jsx("rect",{x:0,y:0,width:o,height:g,fill:"#0f1217",rx:12}),C.map((i,L)=>{const R=j+(1-i)*p,$=i*I;return e.jsxs("g",{children:[e.jsx("line",{x1:u,y1:R,x2:o-h,y2:R,stroke:"rgba(255,255,255,0.08)",strokeWidth:1}),e.jsx("text",{x:u-6,y:R+4,textAnchor:"end",fontSize:10,fill:"rgba(255,255,255,0.6)",children:z($)})]},L)}),e.jsx("line",{x1:u,y1:j,x2:u,y2:j+p,stroke:"rgba(255,255,255,0.25)",strokeWidth:1}),e.jsx("line",{x1:u,y1:j+p,x2:u+m,y2:j+p,stroke:"rgba(255,255,255,0.25)",strokeWidth:1}),F.map((i,L)=>{var $;const R=u+i/Math.max(1,a.length-1)*m;return e.jsxs("g",{children:[e.jsx("line",{x1:R,y1:j,x2:R,y2:j+p,stroke:"rgba(255,255,255,0.08)",strokeWidth:1}),e.jsx("text",{x:R,y:j+p+12,textAnchor:"middle",fontSize:10,fill:"rgba(255,255,255,0.6)",children:b(($=a[i])==null?void 0:$.day)})]},L)}),e.jsx("path",{d:c,fill:"none",stroke:n,strokeWidth:2}),d.length>0&&e.jsx("circle",{cx:d[d.length-1][0],cy:d[d.length-1][1],r:3,fill:n})]})})]})}function Zt(){return e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsxs("div",{className:"title",style:{fontSize:"2em"},children:["mappi! ",e.jsx("span",{style:{fontSize:"0.4em",fontWeight:"normal"},children:"by Catawba."})]}),e.jsx("div",{className:"muted",children:"Hi, I get writers block/lose motivation very very easily. I want this site to counterract that."}),e.jsx("div",{className:"muted",children:"Basically, when you are struggling to come up with ideas; you'd hop on this site, watch a few videos, see something that impresses you, then hopefully you can get back to mapping with a lil' bit of inspiration."}),e.jsxs("div",{className:"section-panel",children:[e.jsx("div",{className:"title",style:{fontSize:18},children:"How it works:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Log in with your osu! account."}),e.jsx("li",{children:"Upload a clip (100MB max). Allow for it to upload/process."}),e.jsx("li",{children:"Uploaded clips enter the random feed. New uploads and liked videos surface more often."}),e.jsx("li",{children:"Moderators can review reports and pending items for safety."})]})]}),e.jsxs("div",{className:"section-panel",children:[e.jsx("div",{className:"title",style:{fontSize:18},children:"Guidelines:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"You can post two clips every 24 hours before getting rate-limited."}),e.jsx("li",{children:"Keep clips 4:3 or 16:9 for best fit. Ultrawide will letterbox."}),e.jsx("li",{children:"Add a short description and (optional) beatmap link."}),e.jsx("li",{children:"Don't post unrelated content."}),e.jsx("li",{children:"Report posts accordingly and within reason."})]})]})]})}function es(){return e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsx("div",{className:"title",style:{fontSize:"2em"},children:"Settings"}),e.jsx("div",{className:"section-panel",children:e.jsx("div",{className:"muted",children:"Settings page coming soon..."})})]})}const ts=()=>(v.useEffect(()=>()=>{zt.clearAll()},[]),e.jsx(Mt,{}));ht();const ss=()=>e.jsx(ct,{children:e.jsxs(Q,{element:e.jsx(Gt,{}),children:[e.jsx(Q,{path:"/",element:e.jsx(Vt,{})}),e.jsx(Q,{path:"/mp/discover",element:e.jsx(xt,{})}),e.jsx(Q,{path:"/mp/feed",element:e.jsx(gt,{})}),e.jsx(Q,{path:"/mp/feed/:uid",element:e.jsx(bt,{})}),e.jsx(Q,{path:"/md/feed",element:e.jsx(Nt,{})}),e.jsx(Q,{path:"/md/feed/:uid",element:e.jsx(wt,{})}),e.jsx(Q,{path:"/md/queues",element:e.jsx(kt,{})}),e.jsx(Q,{path:"/md/queues/:id",element:e.jsx(St,{})}),e.jsx(Q,{path:"/md/notifications",element:e.jsx(Ct,{})}),e.jsx(Q,{path:"/profile",element:e.jsx(we,{})}),e.jsx(Q,{path:"/profile/:id",element:e.jsx(we,{})}),e.jsx(Q,{path:"/moderation",element:e.jsx(Xt,{})}),e.jsx(Q,{path:"/about",element:e.jsx(Zt,{})}),e.jsx(Q,{path:"/settings",element:e.jsx(es,{})}),e.jsx(Q,{path:"/editor",element:e.jsx(ts,{})})]})}),is=()=>e.jsx(ot,{children:e.jsx(ss,{})});rt(document.getElementById("root")).render(e.jsx(Rt,{children:e.jsx(lt,{client:It,children:e.jsx(ft,{children:e.jsx(is,{})})})}));
