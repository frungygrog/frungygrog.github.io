import{r as i,j as e,c as pe,P as me,R as Y,J as Z,V as he,B as de,Y as be,v as xe,G as fe,K as ge,L as ve,A as ye}from"./vendor-react-DlOpOyxn.js";import{O as je}from"./Overlay-CgeSQ-bN.js";import{a as Ne}from"./Popup-C6IAdSN1.js";import{a as b,A as p,b as H,u as we,c as ke}from"./index-BBjNw7Ko.js";import"./vendor-DFcCRmls.js";import"./beatmap-preview-KBszVjOw.js";import"./editor-lib-DRlB_9R9.js";import"./editor-components-BPgr2gO5.js";function ce(m){if(!m)return"standard";const c=String(m).toLowerCase().trim();return c==="osu"||c==="0"||c==="standard"?"standard":c==="taiko"||c==="1"?"taiko":c==="catch"||c==="fruits"||c==="2"?"catch":c==="mania"||c==="3"?"mania":"standard"}const _e=({open:m,onClose:c,videoId:h,initialDescription:I,initialBeatmapUrl:d,onSave:M})=>{const[$,J]=i.useState(I||""),[y,L]=i.useState(d||""),[l,j]=i.useState(null),[x,N]=i.useState(null),[W,_]=i.useState(""),[s,S]=i.useState(!1),T=i.useRef(0);i.useEffect(()=>{m&&(J(I||""),L(d||""),j(null),N(null),_(""))},[m,I,d]),i.useEffect(()=>{if(!m)return;T.current&&window.clearTimeout(T.current);const n=(y||"").trim();if(!n){_(""),j(null),N(null);return}if(!/^https?:\/\/osu\.ppy\.sh\/(beatmapsets|beatmaps)\//i.test(n)){_(""),j(null),N(null);return}return T.current=window.setTimeout(async()=>{var w;try{let u;try{u=new URL(n)}catch{_("Invalid URL format");return}const F=u.hash.match(/#osu\/(\d+)/),A=F?F[1]:null;u.hash="";const B={url:u.toString()};A&&(B.beatmap_id=A);const f=await b(p.osu.resolveBeatmap+H(B),{requireAuth:!1}),g=Array.isArray(f==null?void 0:f.diffs)?f.diffs:[];if(!g.length&&!f.setId){_("No difficulties found"),j(null),N(null);return}if(j({setId:Number(f.setId)||0,beatmapId:f.beatmapId??null,title:String(f.title||""),artist:String(f.artist||""),mapper:String(f.mapper||""),diffs:g}),g.length>0){const E=Number.isFinite(Number(f.beatmapId))?Number(f.beatmapId):Number((w=g[0])==null?void 0:w.id),v=g.find(R=>Number(R.id)===E)||g[0],z=ce(v==null?void 0:v.mode);N({beatmapId:Number(v==null?void 0:v.id)||null,version:String((v==null?void 0:v.version)||""),mode:z})}_("")}catch(u){_(`Failed to resolve: ${(u==null?void 0:u.message)||"Unknown error"}`),j(null),N(null)}},400),()=>{T.current&&window.clearTimeout(T.current)}},[y,m]);const O=async()=>{if(!s){S(!0);try{await b(p.videos.update(h),{method:"PATCH",body:JSON.stringify({description:$.slice(0,100),beatmap_url:y.trim()||void 0})});const n=!!y.trim();if(l||!n)try{await b(p.videos.update(h)+"/beatmap",{method:"PATCH",body:JSON.stringify({beatmapset_id:n&&l&&l.setId>0?l.setId:null,beatmap_id:n&&(x!=null&&x.beatmapId)?x.beatmapId:null,beatmap_version:n&&(x!=null&&x.version)?x.version:null,beatmap_title:n&&(l!=null&&l.title)?l.title:null,beatmap_artist:n&&(l!=null&&l.artist)?l.artist:null,beatmap_mapper:n&&(l!=null&&l.mapper)?l.mapper:null,beatmap_url:n?y.trim():null})})}catch(w){console.warn("Failed to update beatmap metadata:",w)}M($,y.trim()||null),c()}catch(n){alert((n==null?void 0:n.message)||"Failed to update post")}finally{S(!1)}}};return m?e.jsxs("div",{className:"overlay",role:"dialog","aria-modal":"true",onClick:n=>n.target===n.currentTarget&&c(),children:[e.jsx("div",{className:"overlay-backdrop",onClick:c}),e.jsxs("div",{className:"overlay-card",style:{maxWidth:"600px",width:"calc(100vw - 24px)"},children:[e.jsx("button",{className:"overlay-close",onClick:c,"aria-label":"Close",children:e.jsx(pe,{size:18})}),e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsx("div",{className:"title",children:"Edit Post"}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Description (max 100 chars)"}),e.jsx("textarea",{maxLength:100,placeholder:"Description (max 100 chars)",value:$,onChange:n=>J(n.target.value),style:{height:64,resize:"vertical",background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}})]}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Beatmap URL (optional)"}),l?e.jsx("div",{className:"col",style:{gap:8},children:e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{className:"chip-btn",style:{cursor:"default"},children:[e.jsxs("strong",{style:{marginRight:6},children:[l.artist," – ",l.title]}),e.jsxs("span",{className:"muted",children:["by ",l.mapper]})]}),e.jsx("select",{value:(x==null?void 0:x.beatmapId)??l.beatmapId??void 0,onChange:n=>{const C=Number(n.target.value),w=(l==null?void 0:l.diffs.find(u=>Number(u.id)===C))||null;if(w){const u=ce(w.mode);N({beatmapId:C,version:w.version,mode:u})}},style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"},children:l.diffs.map(n=>e.jsxs("option",{value:n.id,children:[n.version," (",n.mode,")"]},n.id))}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>{j(null),N(null),L("")},children:"Clear"})]})}):e.jsx("input",{type:"url",placeholder:"Beatmap URL (optional) e.g. https://osu.ppy.sh/beatmapsets/...",value:y,onChange:n=>L(n.target.value),style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}}),W&&e.jsx("div",{className:"muted",style:{color:"var(--danger)",fontSize:12},children:W})]}),e.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn secondary",onClick:c,disabled:s,children:"Cancel"}),e.jsx("button",{className:"btn",onClick:O,disabled:s,children:s?"Saving...":"Save"})]})]})]})]}):null};function Re(){var ne,le,oe;const m=me(),{notify:c}=we(),[h,I]=i.useState(null),[d,M]=i.useState(null),[$,J]=i.useState(""),[y,L]=i.useState([]),[l,j]=i.useState([]),[x,N]=i.useState([]),[W,_]=i.useState(""),[s,S]=i.useState(null),[T,O]=i.useState(!1),[n,C]=i.useState(!1),[w,u]=i.useState(!1),F=Y.useRef(null),A=Y.useRef(null),Q=Y.useRef(null),[B,f]=i.useState(null),[g,E]=i.useState([]),[v,z]=i.useState(null),[R,ee]=i.useState(""),[te,V]=i.useState([]),[U,X]=i.useState(null),[K,D]=i.useState(null),[G,se]=i.useState(!1),ae=i.useRef(new Set),q=i.useMemo(()=>{const t=m.id?Number(m.id):null;return t?h?h.id===t:!1:!0},[m.id,h]);i.useEffect(()=>{s&&(ae.current.has(s.id)||(ae.current.add(s.id),b(p.videos.view(s.id),{method:"POST"}).then(t=>t||null).then(t=>{if(!t)return;const r=Number(t.views_count??0);j(a=>(a||[]).map(o=>o.id===s.id?{...o,views_count:r,viewed_by_me:!0}:o)),N(a=>(a||[]).map(o=>o.id===s.id?{...o,views_count:r,viewed_by_me:!0}:o)),S(a=>a&&{...a,views_count:r})}).catch(()=>{})))},[s]),i.useLayoutEffect(()=>{C(!1)},[s==null?void 0:s.id]),i.useEffect(()=>{if(!w||!A.current)return;const t=()=>{if(A.current){const a=A.current.getBoundingClientRect();f({top:a.bottom+8,right:window.innerWidth-a.right})}};t(),window.addEventListener("resize",t),window.addEventListener("scroll",t,!0);const r=a=>{F.current&&!F.current.contains(a.target)&&A.current&&!A.current.contains(a.target)&&u(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r),window.removeEventListener("resize",t),window.removeEventListener("scroll",t,!0)}},[w]);async function ue(t){try{const r=t.liked_by_me?"DELETE":"POST",a=await b(p.videos.like(t.id),{method:r}),o=Number((a==null?void 0:a.likes_count)??(t.likes_count||0));j(k=>(k||[]).map(P=>P.id===t.id?{...P,liked_by_me:!t.liked_by_me,likes_count:o}:P)),N(k=>(k||[]).map(P=>P.id===t.id?{...P,liked_by_me:!t.liked_by_me,likes_count:o}:P)),S(k=>k&&k.id===t.id?{...k,liked_by_me:!t.liked_by_me,likes_count:o}:k)}catch{}}async function re(t,r){try{await b(p.videos.flag(t.id),{method:"POST",body:JSON.stringify({reason:r})}),O(!1)}catch{}}i.useEffect(()=>{(async()=>{try{const t=await b(p.auth.me,{requireAuth:!1});I(t),t&&Array.isArray(t.inspirations)&&E(t.inspirations)}catch(t){J((t==null?void 0:t.message)||"Not logged in")}})()},[]),i.useEffect(()=>{(async()=>{try{const t=m.id?Number(m.id):null;if(t){const r=await b(p.users.get(t),{requireAuth:!1});M(r),_(r.about||""),Array.isArray(r.inspirations)&&E(r.inspirations);const a=await b(p.users.videos(t)+H({limit:"60"}),{requireAuth:!1});N(a.items||[]);const o=await b(p.users.likes(t)+H({limit:"60"}),{requireAuth:!1});j(o.items||[])}else{if(!h)return;M(h),_(h.about||""),Array.isArray(h.inspirations)&&E(h.inspirations);const r=await b(p.users.myVideos+H({limit:"50"}),{requireAuth:!1});L(r.items||[]);const a=await b(p.users.likes(h.id)+H({limit:"60"}),{requireAuth:!1});j(a.items||[])}}catch{}})()},[m.id,h]),i.useEffect(()=>{se(!1)},[d==null?void 0:d.id]);async function ie(t){try{const a=(await b(p.auth.me,{method:"PATCH",body:JSON.stringify({inspirations:t})})).user||d;M(a),Array.isArray(a==null?void 0:a.inspirations)&&E(a.inspirations),m.id||I(a)}catch{}}return i.useEffect(()=>{let t;return v!==null&&R.trim().length>=2?t=setTimeout(async()=>{try{const r=await b(p.osu.usersSearch(R),{requireAuth:!1});V(Array.isArray(r.items)?r.items:[])}catch{}},250):V([]),()=>{t&&clearTimeout(t)}},[R,v]),e.jsxs("div",{className:"feed-container",style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0 16px"},children:[e.jsxs("div",{className:"feed-header",children:[e.jsx("div",{className:"row wrap",style:{alignItems:"center"},children:d?e.jsxs(e.Fragment,{children:[d.avatar_url&&e.jsx("img",{src:d.avatar_url,width:48,height:48,style:{borderRadius:"50%"}}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"title",style:{display:"flex",alignItems:"center",gap:8},children:[d.username,d.osu_user_id&&e.jsx("a",{href:`https://osu.ppy.sh/users/${d.osu_user_id}`,target:"_blank",rel:"noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",color:"var(--text)",opacity:.7,cursor:"pointer",padding:0,textDecoration:"none",transition:"opacity 0.2s ease"},onMouseEnter:t=>t.currentTarget.style.opacity="1",onMouseLeave:t=>t.currentTarget.style.opacity="0.7",title:"View osu! profile","aria-label":"View osu! profile",children:e.jsx(Z,{size:16})})]}),e.jsxs("div",{className:"muted",children:["ID: ",d.id]})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[!q&&g.length>0&&e.jsx("span",{className:"muted",style:{fontSize:12},children:"inspired by:"}),g.map((t,r)=>q?e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>D(t.id),onMouseLeave:()=>D(null),children:[e.jsx("button",{className:"insp-avatar",onClick:()=>{if(!confirm("Remove this inspiration?"))return;const a=g.filter((o,k)=>k!==r);E(a),ie(a)},children:e.jsx("img",{src:t.avatar_url,alt:t.username})}),K===t.id&&e.jsxs("div",{className:"insp-tooltip",children:[t.username," — click to remove"]})]},t.id):e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>D(t.id),onMouseLeave:()=>D(null),children:[e.jsx("a",{href:`https://osu.ppy.sh/users/${t.id}`,target:"_blank",rel:"noreferrer",className:"insp-avatar link",children:e.jsx("img",{src:t.avatar_url,alt:t.username})}),K===t.id&&e.jsx("div",{className:"insp-tooltip",children:t.username})]},t.id)),q&&g.length<3&&new Array(3-g.length).fill(0).map((t,r)=>e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>D(-r-1),onMouseLeave:()=>D(null),children:[e.jsx("button",{className:"insp-add",onClick:()=>{z(r),ee(""),V([])},children:"+"}),K===-r-1&&e.jsx("div",{className:"insp-tooltip",children:"Add inspiration"}),v===r&&e.jsxs("div",{className:"insp-pop",role:"dialog","aria-label":"Search osu! users",children:[e.jsx("input",{autoFocus:!0,placeholder:"Search username",value:R,onChange:a=>ee(a.target.value)}),e.jsxs("div",{className:"insp-results",children:[te.length===0&&R.trim().length>=2&&e.jsx("div",{className:"muted",style:{padding:"6px 8px"},children:"No results"}),te.map(a=>e.jsxs("button",{className:"insp-result",onClick:()=>{if(h&&Number(h.osu_user_id)===Number(a.id)){c("Kinda based, but no.",{variant:"warn"}),z(null);return}if(g.some(k=>k.id===a.id)){z(null);return}const o=[...g,{id:a.id,username:a.username,avatar_url:a.avatar_url}].slice(0,3);E(o),z(null),ie(o)},children:[e.jsx("img",{src:a.avatar_url,alt:"avatar"}),e.jsx("span",{children:a.username})]},a.id))]}),e.jsx("button",{className:"insp-close",onClick:()=>z(null),children:"Close"})]})]},`slot-${r}`))]}),q&&e.jsx("div",{className:"muted",style:{fontSize:12},children:"Who inspires you?"})]})]}):e.jsx("div",{className:"muted",children:$||"Loading…"})}),e.jsxs("div",{className:"col",style:{marginTop:12,gap:4},children:[e.jsx("div",{className:"title",children:"About"}),q?e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("textarea",{value:W,onChange:t=>_(t.target.value),rows:3,maxLength:1e3,placeholder:"Write something about yourself (max 1000 chars)"}),e.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:e.jsx("button",{className:"btn compact",onClick:async()=>{try{const t=await b(p.auth.me,{method:"PATCH",body:JSON.stringify({about:W})});M(t.user||d),I(t.user||h)}catch{}},children:"Save"})})]}):(()=>{const t=((d==null?void 0:d.about)||"").trim()||"No bio.",r=t.length>200,a=r&&!G?t.slice(0,200)+"...":t;return e.jsxs("div",{className:"col",style:{gap:4},children:[e.jsx("div",{className:"muted",style:{whiteSpace:"pre-wrap"},children:a}),r&&e.jsx("button",{onClick:()=>se(!G),style:{display:"flex",alignItems:"center",gap:4,background:"transparent",border:"none",color:"var(--muted)",cursor:"pointer",padding:0,fontSize:14,fontFamily:"inherit",marginTop:4},children:G?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Show less"}),e.jsx(he,{size:14})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Show more"}),e.jsx(de,{size:14})]})})]})})()]})]}),e.jsxs("div",{className:"profile-tabs-unified",children:[e.jsxs("div",{className:"profile-tabs-header",role:"tablist","aria-label":"Profile sections",children:[e.jsx("button",{role:"tab","aria-selected":!0,className:"profile-tab active","data-tab":"uploads",onClick:t=>{const r=t.currentTarget.closest(".profile-tabs-unified");r.querySelectorAll(".profile-tab").forEach(o=>{o.classList.remove("active"),o.setAttribute("aria-selected","false")}),t.currentTarget.classList.add("active"),t.currentTarget.setAttribute("aria-selected","true"),r.querySelector(".profile-tabs-content").setAttribute("data-active","uploads")},children:"Uploads"}),e.jsx("button",{role:"tab","aria-selected":!1,className:"profile-tab","data-tab":"likes",onClick:t=>{const r=t.currentTarget.closest(".profile-tabs-unified");r.querySelectorAll(".profile-tab").forEach(o=>{o.classList.remove("active"),o.setAttribute("aria-selected","false")}),t.currentTarget.classList.add("active"),t.currentTarget.setAttribute("aria-selected","true"),r.querySelector(".profile-tabs-content").setAttribute("data-active","likes")},children:"Likes"})]}),e.jsxs("div",{className:"profile-tabs-content","data-active":"uploads",children:[e.jsx("div",{className:"panel uploads",hidden:!1,children:q?e.jsxs("div",{className:"profile-uploads-list",children:[y.length===0&&e.jsx("div",{className:"profile-empty-state",children:"No uploads yet."}),y.map(t=>e.jsxs("div",{className:"profile-upload-item",children:[e.jsxs("div",{className:"profile-upload-item-content",children:[t.poster_url?e.jsx("img",{src:t.poster_url,className:"profile-upload-thumb",alt:"thumbnail"}):e.jsx("div",{className:"profile-upload-thumb-fallback"}),e.jsxs("div",{className:"profile-upload-info",children:[e.jsx("div",{className:"one-line",title:t.description||"",children:t.description||"No description."}),e.jsxs("div",{className:"muted one-line",children:[t.status.toUpperCase()," • ",new Date(t.created_at*1e3).toLocaleString()]})]})]}),e.jsxs("div",{className:"profile-upload-actions",children:[e.jsx("span",{className:"muted",children:t.likes_count??0}),e.jsx("span",{className:"profile-likes-icon",children:"❤"}),e.jsx("button",{className:"btn secondary",onClick:()=>X(t),children:"Edit"}),e.jsx("button",{className:"btn",onClick:async()=>{confirm("Delete this video? This cannot be undone.")&&(await b(p.videos.delete(t.id),{method:"DELETE"}),L(y.filter(r=>r.id!==t.id)))},children:"Delete"})]})]},t.id))]}):e.jsx("div",{className:"profile-grid-container",children:e.jsxs("div",{className:"recent-grid cols3",children:[x.length===0&&e.jsx("div",{className:"profile-empty-state",children:"No uploads yet."}),x.map(t=>{var r,a;return e.jsxs("button",{className:"recent-cell",onClick:()=>S(t),children:[t.poster_url?e.jsx("img",{className:"recent-thumb",src:t.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsxs("div",{className:"cell-footer",children:[((r=t.uploader)==null?void 0:r.avatar_url)&&e.jsx("img",{className:"cell-avatar",src:t.uploader.avatar_url,alt:"avatar"}),e.jsx("span",{className:"cell-name",children:(a=t.uploader)==null?void 0:a.username})]})]},t.id)})]})})}),e.jsx("div",{className:"panel likes",hidden:!0,children:e.jsx("div",{className:"profile-grid-container",children:e.jsxs("div",{className:"recent-grid cols3",children:[l.length===0&&e.jsx("div",{className:"profile-empty-state",children:"No likes yet."}),l.map(t=>{var r,a;return e.jsxs("button",{className:"recent-cell",onClick:()=>S(t),children:[t.poster_url?e.jsx("img",{className:"recent-thumb",src:t.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsxs("div",{className:"cell-footer",children:[((r=t.uploader)==null?void 0:r.avatar_url)&&e.jsx("img",{className:"cell-avatar",src:t.uploader.avatar_url,alt:"avatar"}),e.jsx("span",{className:"cell-name",children:(a=t.uploader)==null?void 0:a.username})]})]},t.id)})]})})})]})]}),U&&e.jsx(_e,{open:!!U,onClose:()=>X(null),videoId:U.id,initialDescription:U.description,initialBeatmapUrl:U.beatmap_url,onSave:(t,r)=>{L(y.map(a=>a.id===U.id?{...a,description:t||null,beatmap_url:r}:a)),X(null)}}),s&&e.jsxs(je,{streamUID:n?null:s.stream_uid,playbackUrl:n?null:s.playback_url,aspectRatio:s!=null&&s.width&&(s!=null&&s.height)?s.width/s.height:16/9,onClose:()=>{S(null),C(!1)},beatmapDownloadUrl:n&&s.beatmapset_id?`${ke}${p.osu.downloadBeatmapset(s.beatmapset_id)}`:null,beatmapId:n?s.beatmap_id??void 0:void 0,beatmapVersion:n?s.beatmap_version??void 0:void 0,onOpenInEditor:()=>{S(null),C(!1),window.location.hash="/editor"},headerLeft:e.jsxs(e.Fragment,{children:[((ne=s.uploader)==null?void 0:ne.avatar_url)&&e.jsx("img",{src:s.uploader.avatar_url,width:28,height:28,style:{borderRadius:"50%"}}),e.jsxs(ve,{to:`/profile/${(le=s.uploader)==null?void 0:le.id}`,style:{marginLeft:6,display:"inline-flex",alignItems:"center",gap:6,textDecoration:"none",color:"inherit",fontWeight:700},onClick:()=>{O(!1)},children:[e.jsx("span",{children:(oe=s.uploader)==null?void 0:oe.username}),s.is_starred?e.jsx(ye,{size:14,color:"#f59e0b",title:"Starred"}):null]})]}),headerRight:e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"views-badge","aria-label":"Views",title:"Views",children:[e.jsx(be,{size:12}),e.jsx("span",{children:s.views_count??0})]}),e.jsxs("button",{className:`chip-btn like ${s.liked_by_me?"liked":""}`,onClick:()=>ue(s),children:[s.liked_by_me?e.jsx(xe,{size:16}):e.jsx(fe,{size:16}),e.jsx("span",{children:s.likes_count??0})]}),e.jsxs("button",{ref:Q,className:"chip-btn report",onClick:()=>O(t=>!t),title:"Report","aria-label":"Report",children:[e.jsx(ge,{size:16}),e.jsx("span",{className:"muted",style:{fontSize:12},children:"Report"})]}),s.beatmap_url&&e.jsx("div",{children:e.jsxs("button",{ref:A,className:"chip-btn link",onClick:()=>u(t=>!t),title:"Beatmap options","aria-label":"Beatmap options",children:[e.jsx(Z,{size:16}),e.jsx("span",{className:"muted",style:{fontSize:12},children:"Beatmap"}),e.jsx(de,{size:14,style:{marginLeft:4,opacity:.7}})]})}),e.jsxs(Ne,{open:T,onClose:()=>O(!1),buttonRef:Q,minWidth:160,children:[e.jsx("div",{className:"muted",style:{fontSize:12,padding:"4px 8px"},children:"Report as…"}),e.jsx("button",{className:"menu-item",onClick:()=>re(s,"unrelated"),children:"Unrelated"}),e.jsx("button",{className:"menu-item",onClick:()=>re(s,"explicit"),children:"Explicit"})]})]}),children:[e.jsx("div",{className:"muted one-line",style:{marginTop:6},children:(s.description??"").trim()||"No description."}),s.beatmap_title&&e.jsxs("div",{style:{fontSize:12,color:"#7b8491",marginTop:8},children:[s.beatmap_artist," – ",s.beatmap_title," ",s.beatmap_mapper?`(by ${s.beatmap_mapper})`:""," ",s.beatmap_version?`[${s.beatmap_version}]`:""]})]}),w&&B&&(s==null?void 0:s.beatmap_url)&&e.jsxs("div",{ref:F,style:{position:"fixed",top:B.top,right:B.right,background:"var(--panel)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:6,zIndex:1e3,minWidth:160,boxShadow:"0 12px 30px rgba(0,0,0,0.4)"},children:[e.jsxs("a",{className:"menu-item",href:s.beatmap_url,target:"_blank",rel:"noreferrer",onClick:()=>u(!1),children:[e.jsx(Z,{size:16,style:{marginRight:8}}),"osu.ppy.sh"]}),s.beatmapset_id&&e.jsx("button",{className:"menu-item",onClick:()=>{C(!0),u(!1)},children:"Preview"})]}),e.jsx("style",{children:`
        .insp-avatar { width: 32px; height: 32px; border-radius: 9999px; padding: 0; border: none; overflow: hidden; cursor: pointer; background: rgba(255,255,255,0.06); display: inline-flex; align-items: center; justify-content: center; }
        .insp-avatar.link { background: transparent; border: 1px solid rgba(255,255,255,0.08); }
        .insp-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .insp-add { width: 32px; height: 32px; border-radius: 9999px; border: 1px dashed rgba(255,255,255,0.25); background: transparent; color: #e5e7eb; font-weight: 700; cursor: pointer; }
        .insp-add:hover { border-color: rgba(255,255,255,0.5); }
        .insp-tooltip {
          position: absolute;
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
          background: rgba(18, 20, 24, 0.95);
          color: var(--text, #e5e7eb);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 6px;
          padding: 6px 10px;
          font-size: 14px;
          white-space: nowrap;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          z-index: 10000;
          pointer-events: none;
          font-family: 'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif;
        }
        .insp-tooltip::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 5px solid transparent;
          border-right: 5px solid transparent;
          border-top: 5px solid rgba(18, 20, 24, 0.95);
        }
        .insp-pop { position: absolute; right: 0; top: 40px; width: 260px; background: var(--panel); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; box-shadow: 0 12px 30px rgba(0,0,0,0.4); padding: 8px; z-index: 10; }
        .insp-pop input { width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: var(--panel-dark); color: #fff; outline: none; box-sizing: border-box; display: block; }
        .insp-results { margin-top: 6px; max-height: 220px; overflow: auto; display: grid; gap: 4px; }
        .insp-result { display: grid; grid-template-columns: 24px 1fr; gap: 8px; align-items: center; padding: 6px 8px; border-radius: 8px; border: 1px solid transparent; background: transparent; color: #e5e7eb; cursor: pointer; text-align: left; }
        .insp-result:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .insp-result img { width: 24px; height: 24px; border-radius: 9999px; object-fit: cover; }
        .insp-close { margin-top: 6px; width: 100%; padding: 6px 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.04); color: #e5e7eb; cursor: pointer; }
      `})]})}export{Re as default};
