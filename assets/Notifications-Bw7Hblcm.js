import{j as s,l as x,p as g,A as p,m as y,n as k,o as j}from"./vendor-react-Bj2Cd7tG.js";import{d as f,e as b,f as N,u as w}from"./index-DyyemiDU.js";import"./vendor-CBpd7OPg.js";import"./editor-components-B-SB05wW.js";function z(){const{data:i=[],isLoading:r}=f(),n=b(),d=N(),{notify:l}=w(),a=async e=>{n.mutate(e,{onSuccess:()=>{}})},o=async e=>{e.startsWith("n:")&&d.mutate(e)},c=async()=>{const e=i.filter(t=>!t.read&&(t.id.startsWith("n:")||t.kind==="system"&&!t.id.startsWith("b:"))).map(t=>t.id);e.length>0&&(await a(e),l("All notifications marked as read",{variant:"success"}))},m=e=>e.kind==="star"?s.jsx(p,{size:20,color:"#f59e0b"}):e.kind==="likes5"?s.jsx(y,{size:20,color:"#f472b6"}):e.kind==="inspiration"?s.jsx(k,{size:20,color:"#7dd3fc"}):e.id.startsWith("b:")?s.jsx(j,{size:20,color:"#a78bfa"}):null,u=e=>e.kind==="star"?"Star":e.kind==="likes5"?"Likes":e.kind==="inspiration"?"Inspiration":e.id.startsWith("b:")?"Global":"System",h=i.filter(e=>!e.read&&!(e.id.startsWith("b:")&&e.expiresAt&&e.expiresAt<=Date.now())).length;return s.jsxs("div",{className:"col",style:{width:"100%",maxWidth:700,margin:"0 auto"},children:[s.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[s.jsx("div",{className:"title",children:"Notifications"}),h>0&&s.jsxs("button",{className:"btn secondary",onClick:c,children:[s.jsx(x,{size:16,style:{marginRight:6}}),"Mark all read"]})]}),r?s.jsx("div",{className:"muted",style:{textAlign:"center",padding:32},children:"Loading..."}):i.length===0?s.jsx("div",{className:"muted",style:{textAlign:"center",padding:32},children:"No notifications yet."}):s.jsx("div",{className:"col",style:{gap:8},children:i.filter(e=>!(e.id.startsWith("b:")&&e.expiresAt&&e.expiresAt<=Date.now())).map(e=>s.jsx("div",{style:{background:e.read?"#0f1217":"#121418",border:`1px solid ${e.read?"rgba(255,255,255,0.08)":"rgba(125, 211, 252, 0.3)"}`,borderRadius:12,padding:16,cursor:e.videoId?"pointer":"default",opacity:e.read?.7:1},onClick:()=>{!e.read&&e.id.startsWith("n:")&&a([e.id]),e.videoId&&(window.location.hash="/mp/feed")},children:s.jsxs("div",{className:"row",style:{alignItems:"flex-start",gap:12},children:[s.jsx("div",{style:{width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.05)",borderRadius:"50%"},children:m(e)}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[s.jsx("strong",{style:{fontSize:14},children:u(e)}),s.jsxs("div",{className:"row",style:{alignItems:"center",gap:8},children:[s.jsx("span",{className:"muted",style:{fontSize:12},children:new Date(e.createdAt).toLocaleDateString()}),e.id.startsWith("n:")&&s.jsx("button",{className:"icon-link",onClick:t=>{t.stopPropagation(),o(e.id)},style:{padding:4},children:s.jsx(g,{size:14})})]})]}),s.jsx("div",{style:{fontSize:14,wordBreak:"break-word"},children:e.text||(e.kind==="star"?"One of your posts was starred!":e.kind==="likes5"?"One of your posts reached 5 likes!":e.kind==="inspiration"?"Someone is inspired by you!":"")}),e.read&&e.readAt&&s.jsxs("div",{className:"muted",style:{fontSize:11,marginTop:4},children:["Read ",new Date(e.readAt).toLocaleString()]})]})]})},e.id))})]})}export{z as default};
