import{r as n,j as e,c as de,M as ce,R as K,G as Y,V as ue,p as pe,D as me,I as he,w as be,L as xe,A as ge}from"./vendor-react-_vsaDC62.js";import{O as fe}from"./Overlay-U74KSjg-.js";import{a as ve}from"./Popup-BrRvSbod.js";import{a as b,A as u,b as H,u as ye,e as je}from"./index-Xby6N462.js";import"./vendor-DBgzFpze.js";import"./beatmap-preview-iFLBdsja.js";import"./editor-lib-BGkr3wNG.js";import"./editor-components-CKFEosPJ.js";function le(p){if(!p)return"standard";const d=String(p).toLowerCase().trim();return d==="osu"||d==="0"||d==="standard"?"standard":d==="taiko"||d==="1"?"taiko":d==="catch"||d==="fruits"||d==="2"?"catch":d==="mania"||d==="3"?"mania":"standard"}const Ne=({open:p,onClose:d,videoId:m,initialDescription:I,initialBeatmapUrl:h,onSave:M})=>{const[W,J]=n.useState(I||""),[y,T]=n.useState(h||""),[l,j]=n.useState(null),[x,N]=n.useState(null),[$,_]=n.useState(""),[a,S]=n.useState(!1),L=n.useRef(0);n.useEffect(()=>{p&&(J(I||""),T(h||""),j(null),N(null),_(""))},[p,I,h]),n.useEffect(()=>{if(!p)return;L.current&&window.clearTimeout(L.current);const i=(y||"").trim();if(!i){_(""),j(null),N(null);return}if(!/^https?:\/\/osu\.ppy\.sh\/(beatmapsets|beatmaps)\//i.test(i)){_(""),j(null),N(null);return}return L.current=window.setTimeout(async()=>{var w;try{let c;try{c=new URL(i)}catch{_("Invalid URL format");return}const D=c.hash.match(/#osu\/(\d+)/),A=D?D[1]:null;c.hash="";const B={url:c.toString()};A&&(B.beatmap_id=A);const g=await b(u.osu.resolveBeatmap+H(B),{requireAuth:!1}),f=Array.isArray(g==null?void 0:g.diffs)?g.diffs:[];if(!f.length&&!g.setId){_("No difficulties found"),j(null),N(null);return}if(j({setId:Number(g.setId)||0,beatmapId:g.beatmapId??null,title:String(g.title||""),artist:String(g.artist||""),mapper:String(g.mapper||""),diffs:f}),f.length>0){const E=Number.isFinite(Number(g.beatmapId))?Number(g.beatmapId):Number((w=f[0])==null?void 0:w.id),v=f.find(z=>Number(z.id)===E)||f[0],R=le(v==null?void 0:v.mode);N({beatmapId:Number(v==null?void 0:v.id)||null,version:String((v==null?void 0:v.version)||""),mode:R})}_("")}catch(c){_(`Failed to resolve: ${(c==null?void 0:c.message)||"Unknown error"}`),j(null),N(null)}},400),()=>{L.current&&window.clearTimeout(L.current)}},[y,p]);const O=async()=>{if(!a){S(!0);try{await b(u.videos.update(m),{method:"PATCH",body:JSON.stringify({description:W.slice(0,100),beatmap_url:y.trim()||void 0})});const i=!!y.trim();if(l||!i)try{await b(u.videos.update(m)+"/beatmap",{method:"PATCH",body:JSON.stringify({beatmapset_id:i&&l&&l.setId>0?l.setId:null,beatmap_id:i&&(x!=null&&x.beatmapId)?x.beatmapId:null,beatmap_version:i&&(x!=null&&x.version)?x.version:null,beatmap_title:i&&(l!=null&&l.title)?l.title:null,beatmap_artist:i&&(l!=null&&l.artist)?l.artist:null,beatmap_mapper:i&&(l!=null&&l.mapper)?l.mapper:null,beatmap_url:i?y.trim():null})})}catch(w){console.warn("Failed to update beatmap metadata:",w)}M(W,y.trim()||null),d()}catch(i){alert((i==null?void 0:i.message)||"Failed to update post")}finally{S(!1)}}};return p?e.jsxs("div",{className:"overlay",role:"dialog","aria-modal":"true",onClick:i=>i.target===i.currentTarget&&d(),children:[e.jsx("div",{className:"overlay-backdrop",onClick:d}),e.jsxs("div",{className:"overlay-card",style:{maxWidth:"600px",width:"calc(100vw - 24px)"},children:[e.jsx("button",{className:"overlay-close",onClick:d,"aria-label":"Close",children:e.jsx(de,{size:18})}),e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsx("div",{className:"title",children:"Edit Post"}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Description (max 100 chars)"}),e.jsx("textarea",{maxLength:100,placeholder:"Description (max 100 chars)",value:W,onChange:i=>J(i.target.value),style:{height:64,resize:"vertical",background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}})]}),e.jsxs("div",{className:"col",style:{gap:8},children:[e.jsx("label",{className:"muted",style:{fontSize:12},children:"Beatmap URL (optional)"}),l?e.jsx("div",{className:"col",style:{gap:8},children:e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{className:"chip-btn",style:{cursor:"default"},children:[e.jsxs("strong",{style:{marginRight:6},children:[l.artist," – ",l.title]}),e.jsxs("span",{className:"muted",children:["by ",l.mapper]})]}),e.jsx("select",{value:(x==null?void 0:x.beatmapId)??l.beatmapId??void 0,onChange:i=>{const C=Number(i.target.value),w=(l==null?void 0:l.diffs.find(c=>Number(c.id)===C))||null;if(w){const c=le(w.mode);N({beatmapId:C,version:w.version,mode:c})}},style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"},children:l.diffs.map(i=>e.jsxs("option",{value:i.id,children:[i.version," (",i.mode,")"]},i.id))}),e.jsx("button",{className:"btn secondary",type:"button",onClick:()=>{j(null),N(null),T("")},children:"Clear"})]})}):e.jsx("input",{type:"url",placeholder:"Beatmap URL (optional) e.g. https://osu.ppy.sh/beatmapsets/...",value:y,onChange:i=>T(i.target.value),style:{background:"var(--panel-dark)",color:"var(--text)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:"8px 10px"}}),$&&e.jsx("div",{className:"muted",style:{color:"var(--danger)",fontSize:12},children:$})]}),e.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn secondary",onClick:d,disabled:a,children:"Cancel"}),e.jsx("button",{className:"btn",onClick:O,disabled:a,children:a?"Saving...":"Save"})]})]})]})]}):null};function Te(){var re,ie,ne;const p=ce(),{notify:d}=ye(),[m,I]=n.useState(null),[h,M]=n.useState(null),[W,J]=n.useState(""),[y,T]=n.useState([]),[l,j]=n.useState([]),[x,N]=n.useState([]),[$,_]=n.useState(""),[a,S]=n.useState(null),[L,O]=n.useState(!1),[i,C]=n.useState(!1),[w,c]=n.useState(!1),D=K.useRef(null),A=K.useRef(null),Q=K.useRef(null),[B,g]=n.useState(null),[f,E]=n.useState([]),[v,R]=n.useState(null),[z,Z]=n.useState(""),[ee,V]=n.useState([]),[F,X]=n.useState(null),[G,U]=n.useState(null),te=n.useRef(new Set),q=n.useMemo(()=>{const t=p.id?Number(p.id):null;return t?m?m.id===t:!1:!0},[p.id,m]);n.useEffect(()=>{a&&(te.current.has(a.id)||(te.current.add(a.id),b(u.videos.view(a.id),{method:"POST"}).then(t=>t||null).then(t=>{if(!t)return;const r=Number(t.views_count??0);j(s=>(s||[]).map(o=>o.id===a.id?{...o,views_count:r,viewed_by_me:!0}:o)),N(s=>(s||[]).map(o=>o.id===a.id?{...o,views_count:r,viewed_by_me:!0}:o)),S(s=>s&&{...s,views_count:r})}).catch(()=>{})))},[a]),n.useLayoutEffect(()=>{C(!1)},[a==null?void 0:a.id]),n.useEffect(()=>{if(!w||!A.current)return;const t=()=>{if(A.current){const s=A.current.getBoundingClientRect();g({top:s.bottom+8,right:window.innerWidth-s.right})}};t(),window.addEventListener("resize",t),window.addEventListener("scroll",t,!0);const r=s=>{D.current&&!D.current.contains(s.target)&&A.current&&!A.current.contains(s.target)&&c(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r),window.removeEventListener("resize",t),window.removeEventListener("scroll",t,!0)}},[w]);async function oe(t){try{const r=t.liked_by_me?"DELETE":"POST",s=await b(u.videos.like(t.id),{method:r}),o=Number((s==null?void 0:s.likes_count)??(t.likes_count||0));j(k=>(k||[]).map(P=>P.id===t.id?{...P,liked_by_me:!t.liked_by_me,likes_count:o}:P)),N(k=>(k||[]).map(P=>P.id===t.id?{...P,liked_by_me:!t.liked_by_me,likes_count:o}:P)),S(k=>k&&k.id===t.id?{...k,liked_by_me:!t.liked_by_me,likes_count:o}:k)}catch{}}async function ae(t,r){try{await b(u.videos.flag(t.id),{method:"POST",body:JSON.stringify({reason:r})}),O(!1)}catch{}}n.useEffect(()=>{(async()=>{try{const t=await b(u.auth.me,{requireAuth:!1});I(t),t&&Array.isArray(t.inspirations)&&E(t.inspirations)}catch(t){J((t==null?void 0:t.message)||"Not logged in")}})()},[]),n.useEffect(()=>{(async()=>{try{const t=p.id?Number(p.id):null;if(t){const r=await b(u.users.get(t),{requireAuth:!1});M(r),_(r.about||""),Array.isArray(r.inspirations)&&E(r.inspirations);const s=await b(u.users.videos(t)+H({limit:"60"}),{requireAuth:!1});N(s.items||[]);const o=await b(u.users.likes(t)+H({limit:"60"}),{requireAuth:!1});j(o.items||[])}else{if(!m)return;M(m),_(m.about||""),Array.isArray(m.inspirations)&&E(m.inspirations);const r=await b(u.users.myVideos+H({limit:"50"}),{requireAuth:!1});T(r.items||[]);const s=await b(u.users.likes(m.id)+H({limit:"60"}),{requireAuth:!1});j(s.items||[])}}catch{}})()},[p.id,m]);async function se(t){try{const s=(await b(u.auth.me,{method:"PATCH",body:JSON.stringify({inspirations:t})})).user||h;M(s),Array.isArray(s==null?void 0:s.inspirations)&&E(s.inspirations),p.id||I(s)}catch{}}return n.useEffect(()=>{let t;return v!==null&&z.trim().length>=2?t=setTimeout(async()=>{try{const r=await b(u.osu.usersSearch(z),{requireAuth:!1});V(Array.isArray(r.items)?r.items:[])}catch{}},250):V([]),()=>{t&&clearTimeout(t)}},[z,v]),e.jsxs("div",{className:"col",style:{width:"100%"},children:[e.jsx("div",{className:"row wrap",style:{alignItems:"center"},children:h?e.jsxs(e.Fragment,{children:[h.avatar_url&&e.jsx("img",{src:h.avatar_url,width:48,height:48,style:{borderRadius:"50%"}}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"title",style:{display:"flex",alignItems:"center",gap:8},children:[h.username,h.osu_user_id&&e.jsx("a",{href:`https://osu.ppy.sh/users/${h.osu_user_id}`,target:"_blank",rel:"noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",color:"var(--text)",opacity:.7,cursor:"pointer",padding:0,textDecoration:"none",transition:"opacity 0.2s ease"},onMouseEnter:t=>t.currentTarget.style.opacity="1",onMouseLeave:t=>t.currentTarget.style.opacity="0.7",title:"View osu! profile","aria-label":"View osu! profile",children:e.jsx(Y,{size:16})})]}),e.jsxs("div",{className:"muted",children:["ID: ",h.id]})]}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[!q&&f.length>0&&e.jsx("span",{className:"muted",style:{fontSize:12},children:"inspired by:"}),f.map((t,r)=>q?e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>U(t.id),onMouseLeave:()=>U(null),children:[e.jsx("button",{className:"insp-avatar",onClick:()=>{if(!confirm("Remove this inspiration?"))return;const s=f.filter((o,k)=>k!==r);E(s),se(s)},children:e.jsx("img",{src:t.avatar_url,alt:t.username})}),G===t.id&&e.jsxs("div",{className:"insp-tooltip",children:[t.username," — click to remove"]})]},t.id):e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>U(t.id),onMouseLeave:()=>U(null),children:[e.jsx("a",{href:`https://osu.ppy.sh/users/${t.id}`,target:"_blank",rel:"noreferrer",className:"insp-avatar link",children:e.jsx("img",{src:t.avatar_url,alt:t.username})}),G===t.id&&e.jsx("div",{className:"insp-tooltip",children:t.username})]},t.id)),q&&f.length<3&&new Array(3-f.length).fill(0).map((t,r)=>e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>U(-r-1),onMouseLeave:()=>U(null),children:[e.jsx("button",{className:"insp-add",onClick:()=>{R(r),Z(""),V([])},children:"+"}),G===-r-1&&e.jsx("div",{className:"insp-tooltip",children:"Add inspiration"}),v===r&&e.jsxs("div",{className:"insp-pop",role:"dialog","aria-label":"Search osu! users",children:[e.jsx("input",{autoFocus:!0,placeholder:"Search username",value:z,onChange:s=>Z(s.target.value)}),e.jsxs("div",{className:"insp-results",children:[ee.length===0&&z.trim().length>=2&&e.jsx("div",{className:"muted",style:{padding:"6px 8px"},children:"No results"}),ee.map(s=>e.jsxs("button",{className:"insp-result",onClick:()=>{if(m&&Number(m.osu_user_id)===Number(s.id)){d("Kinda based, but no",{variant:"warn"}),R(null);return}if(f.some(k=>k.id===s.id)){R(null);return}const o=[...f,{id:s.id,username:s.username,avatar_url:s.avatar_url}].slice(0,3);E(o),R(null),se(o)},children:[e.jsx("img",{src:s.avatar_url,alt:"avatar"}),e.jsx("span",{children:s.username})]},s.id))]}),e.jsx("button",{className:"insp-close",onClick:()=>R(null),children:"Close"})]})]},`slot-${r}`))]}),q&&e.jsx("div",{className:"muted",style:{fontSize:12},children:"Who inspires you?"})]})]}):e.jsx("div",{className:"muted",children:W||"Loading…"})}),e.jsxs("div",{className:"col",style:{marginTop:12,gap:4},children:[e.jsx("div",{className:"title",children:"About"}),q?e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("textarea",{value:$,onChange:t=>_(t.target.value),rows:3,maxLength:300,placeholder:"Write something about yourself (max 300 chars)"}),e.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:e.jsx("button",{className:"btn compact",onClick:async()=>{try{const t=await b(u.auth.me,{method:"PATCH",body:JSON.stringify({about:$})});M(t.user||h),I(t.user||m)}catch{}},children:"Save"})})]}):e.jsx("div",{className:"muted",style:{whiteSpace:"pre-wrap"},children:((h==null?void 0:h.about)||"").trim()||"No bio."})]}),e.jsxs("div",{className:"col",style:{marginTop:12,gap:4},children:[e.jsxs("div",{className:"tabs",role:"tablist","aria-label":"Profile sections",children:[e.jsx("button",{role:"tab","aria-selected":!0,className:"tab active","data-tab":"uploads",onClick:t=>{const r=t.currentTarget.parentElement;r.querySelectorAll(".tab").forEach(o=>{o.classList.remove("active"),o.setAttribute("aria-selected","false")}),t.currentTarget.classList.add("active"),t.currentTarget.setAttribute("aria-selected","true"),r.nextElementSibling.setAttribute("data-active","uploads")},children:"Uploads"}),e.jsx("button",{role:"tab","aria-selected":!1,className:"tab","data-tab":"likes",onClick:t=>{const r=t.currentTarget.parentElement;r.querySelectorAll(".tab").forEach(o=>{o.classList.remove("active"),o.setAttribute("aria-selected","false")}),t.currentTarget.classList.add("active"),t.currentTarget.setAttribute("aria-selected","true"),r.nextElementSibling.setAttribute("data-active","likes")},children:"Likes"})]}),e.jsxs("div",{className:"tabs-content","data-active":"uploads",children:[e.jsx("div",{className:"panel uploads",hidden:!1,children:q?e.jsxs("div",{className:"scroll-panel sm",children:[y.length===0&&e.jsx("div",{className:"muted",children:"No uploads yet."}),y.map(t=>e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:"8px 10px"},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",minWidth:0,gap:10},children:[t.poster_url?e.jsx("img",{src:t.poster_url,width:64,height:36,style:{objectFit:"cover",borderRadius:6}}):e.jsx("div",{style:{width:64,height:36,borderRadius:6,background:"#0f1217"}}),e.jsxs("div",{className:"col",style:{minWidth:0},children:[e.jsx("div",{className:"one-line",title:t.description||"",children:t.description||"No description."}),e.jsxs("div",{className:"muted one-line",children:[t.status.toUpperCase()," • ",new Date(t.created_at*1e3).toLocaleString()]})]})]}),e.jsxs("div",{className:"row wrap",style:{gap:8,alignItems:"center"},children:[e.jsx("span",{className:"muted",children:t.likes_count??0}),e.jsx("span",{style:{color:"var(--accent)"},children:"❤"}),e.jsx("button",{className:"btn secondary",onClick:()=>X(t),children:"Edit"}),e.jsx("button",{className:"btn",onClick:async()=>{confirm("Delete this video? This cannot be undone.")&&(await b(u.videos.delete(t.id),{method:"DELETE"}),T(y.filter(r=>r.id!==t.id)))},children:"Delete"})]})]},t.id))]}):e.jsx("div",{className:"scroll-panel sm",style:{marginTop:0},children:e.jsxs("div",{className:"recent-grid cols4",children:[x.length===0&&e.jsx("div",{className:"muted",children:"No uploads yet."}),x.map(t=>{var r,s;return e.jsxs("button",{className:"recent-cell",onClick:()=>S(t),children:[t.poster_url?e.jsx("img",{className:"recent-thumb",src:t.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsxs("div",{className:"cell-footer",children:[((r=t.uploader)==null?void 0:r.avatar_url)&&e.jsx("img",{className:"cell-avatar",src:t.uploader.avatar_url,alt:"avatar"}),e.jsx("span",{className:"cell-name",children:(s=t.uploader)==null?void 0:s.username})]})]},t.id)})]})})}),e.jsx("div",{className:"panel likes",hidden:!0,children:e.jsx("div",{className:"scroll-panel sm",style:{marginTop:0},children:e.jsxs("div",{className:"recent-grid cols4",children:[l.length===0&&e.jsx("div",{className:"muted",children:"No likes yet."}),l.map(t=>{var r,s;return e.jsxs("button",{className:"recent-cell",onClick:()=>S(t),children:[t.poster_url?e.jsx("img",{className:"recent-thumb",src:t.poster_url,alt:"thumb"}):e.jsx("div",{className:"thumb-fallback"}),e.jsxs("div",{className:"cell-footer",children:[((r=t.uploader)==null?void 0:r.avatar_url)&&e.jsx("img",{className:"cell-avatar",src:t.uploader.avatar_url,alt:"avatar"}),e.jsx("span",{className:"cell-name",children:(s=t.uploader)==null?void 0:s.username})]})]},t.id)})]})})})]})]}),F&&e.jsx(Ne,{open:!!F,onClose:()=>X(null),videoId:F.id,initialDescription:F.description,initialBeatmapUrl:F.beatmap_url,onSave:(t,r)=>{T(y.map(s=>s.id===F.id?{...s,description:t||null,beatmap_url:r}:s)),X(null)}}),a&&e.jsxs(fe,{streamUID:i?null:a.stream_uid,playbackUrl:i?null:a.playback_url,aspectRatio:a!=null&&a.width&&(a!=null&&a.height)?a.width/a.height:16/9,onClose:()=>{S(null),C(!1)},beatmapDownloadUrl:i&&a.beatmapset_id?`${je}${u.osu.downloadBeatmapset(a.beatmapset_id)}`:null,beatmapId:i?a.beatmap_id??void 0:void 0,beatmapVersion:i?a.beatmap_version??void 0:void 0,onOpenInEditor:()=>{S(null),C(!1),window.location.hash="/editor"},headerLeft:e.jsxs(e.Fragment,{children:[((re=a.uploader)==null?void 0:re.avatar_url)&&e.jsx("img",{src:a.uploader.avatar_url,width:28,height:28,style:{borderRadius:"50%"}}),e.jsxs(xe,{to:`/profile/${(ie=a.uploader)==null?void 0:ie.id}`,style:{marginLeft:6,display:"inline-flex",alignItems:"center",gap:6,textDecoration:"none",color:"inherit",fontWeight:700},onClick:()=>{O(!1)},children:[e.jsx("span",{children:(ne=a.uploader)==null?void 0:ne.username}),a.is_starred?e.jsx(ge,{size:14,color:"#f59e0b",title:"Starred"}):null]})]}),headerRight:e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"views-badge","aria-label":"Views",title:"Views",children:[e.jsx(ue,{size:12}),e.jsx("span",{children:a.views_count??0})]}),e.jsxs("button",{className:`chip-btn like ${a.liked_by_me?"liked":""}`,onClick:()=>oe(a),children:[a.liked_by_me?e.jsx(pe,{size:16}):e.jsx(me,{size:16}),e.jsx("span",{children:a.likes_count??0})]}),e.jsxs("button",{ref:Q,className:"chip-btn report",onClick:()=>O(t=>!t),title:"Report","aria-label":"Report",children:[e.jsx(he,{size:16}),e.jsx("span",{className:"muted",style:{fontSize:12},children:"Report"})]}),a.beatmap_url&&e.jsx("div",{children:e.jsxs("button",{ref:A,className:"chip-btn link",onClick:()=>c(t=>!t),title:"Beatmap options","aria-label":"Beatmap options",children:[e.jsx(Y,{size:16}),e.jsx("span",{className:"muted",style:{fontSize:12},children:"Beatmap"}),e.jsx(be,{size:14,style:{marginLeft:4,opacity:.7}})]})}),e.jsxs(ve,{open:L,onClose:()=>O(!1),buttonRef:Q,minWidth:160,children:[e.jsx("div",{className:"muted",style:{fontSize:12,padding:"4px 8px"},children:"Report as…"}),e.jsx("button",{className:"menu-item",onClick:()=>ae(a,"unrelated"),children:"Unrelated"}),e.jsx("button",{className:"menu-item",onClick:()=>ae(a,"explicit"),children:"Explicit"})]})]}),children:[e.jsx("div",{className:"muted one-line",style:{marginTop:6},children:(a.description??"").trim()||"No description."}),a.beatmap_title&&e.jsxs("div",{style:{fontSize:12,color:"#7b8491",marginTop:8},children:[a.beatmap_artist," – ",a.beatmap_title," ",a.beatmap_mapper?`(by ${a.beatmap_mapper})`:""," ",a.beatmap_version?`[${a.beatmap_version}]`:""]})]}),w&&B&&(a==null?void 0:a.beatmap_url)&&e.jsxs("div",{ref:D,style:{position:"fixed",top:B.top,right:B.right,background:"var(--panel)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:6,zIndex:1e3,minWidth:160,boxShadow:"0 12px 30px rgba(0,0,0,0.4)"},children:[e.jsxs("a",{className:"menu-item",href:a.beatmap_url,target:"_blank",rel:"noreferrer",onClick:()=>c(!1),children:[e.jsx(Y,{size:16,style:{marginRight:8}}),"osu.ppy.sh"]}),a.beatmapset_id&&e.jsx("button",{className:"menu-item",onClick:()=>{C(!0),c(!1)},children:"Preview"})]}),e.jsx("style",{children:`
        .insp-avatar { width: 32px; height: 32px; border-radius: 9999px; padding: 0; border: none; overflow: hidden; cursor: pointer; background: rgba(255,255,255,0.06); display: inline-flex; align-items: center; justify-content: center; }
        .insp-avatar.link { background: transparent; border: 1px solid rgba(255,255,255,0.08); }
        .insp-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .insp-add { width: 32px; height: 32px; border-radius: 9999px; border: 1px dashed rgba(255,255,255,0.25); background: transparent; color: #e5e7eb; font-weight: 700; cursor: pointer; }
        .insp-add:hover { border-color: rgba(255,255,255,0.5); }
        .insp-tooltip {
          position: absolute;
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
          background: rgba(18, 20, 24, 0.95);
          color: var(--text, #e5e7eb);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 6px;
          padding: 6px 10px;
          font-size: 14px;
          white-space: nowrap;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          z-index: 10000;
          pointer-events: none;
          font-family: 'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif;
        }
        .insp-tooltip::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 5px solid transparent;
          border-right: 5px solid transparent;
          border-top: 5px solid rgba(18, 20, 24, 0.95);
        }
        .insp-pop { position: absolute; right: 0; top: 40px; width: 260px; background: var(--panel); border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; box-shadow: 0 12px 30px rgba(0,0,0,0.4); padding: 8px; z-index: 10; }
        .insp-pop input { width: 100%; padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: var(--panel-dark); color: #fff; outline: none; box-sizing: border-box; display: block; }
        .insp-results { margin-top: 6px; max-height: 220px; overflow: auto; display: grid; gap: 4px; }
        .insp-result { display: grid; grid-template-columns: 24px 1fr; gap: 8px; align-items: center; padding: 6px 8px; border-radius: 8px; border: 1px solid transparent; background: transparent; color: #e5e7eb; cursor: pointer; text-align: left; }
        .insp-result:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.08); }
        .insp-result img { width: 24px; height: 24px; border-radius: 9999px; object-fit: cover; }
        .insp-close { margin-top: 6px; width: 100%; padding: 6px 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.04); color: #e5e7eb; cursor: pointer; }
        .recent-grid { display: grid; gap: 10px; }
        .recent-grid.cols4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        @media (max-width: 980px) { .recent-grid.cols4 { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
        @media (max-width: 720px) { .recent-grid.cols4 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        /* Single column on very narrow phones for readability */
        @media (max-width: 420px) {
          .recent-grid { gap: 8px; }
          .recent-grid.cols4 { grid-template-columns: 1fr; }
        }
        .recent-cell { position: relative; background: #0f1217; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 0; overflow: hidden; cursor: pointer; text-decoration: none; color: inherit; }
        .recent-thumb { display: block; width: 100%; aspect-ratio: 16 / 9; object-fit: cover; }
        .thumb-fallback { width: 100%; aspect-ratio: 16 / 9; background: #0b0d10; }
        .cell-footer { position: absolute; left: 8px; bottom: 8px; display: inline-flex; align-items: center; gap: 6px; padding: 4px 6px; border-radius: 9999px; background: rgba(0,0,0,0.45); backdrop-filter: blur(2px); max-width: calc(100% - 16px); flex-wrap: wrap; }
        .cell-avatar { width: 18px; height: 18px; border-radius: 50%; display: inline-block; object-fit: cover; }
        .cell-name { font-size: 12px; color: #e5e7eb; word-break: break-word; }
        /* Segmented tabs tucked above content */
        .tabs-content { padding: 4px 0 0 0; border: none; }
        .tabs-content[data-active="uploads"] .panel.uploads { display: block; }
        .tabs-content[data-active="uploads"] .panel.likes { display: none; }
        .tabs-content[data-active="likes"] .panel.uploads { display: none; }
        .tabs-content[data-active="likes"] .panel.likes { display: block; }
      `})]})}export{Te as default};
