import{r as n,j as t}from"./vendor-react-Dd0bvrP_.js";const L=({playbackUrl:a,streamUID:i,aspectRatio:s,preferNative:r=!1,autoplay:v=!1,loop:g=!1,muted:y=!1,controls:b=!0,onVideoRef:c,onClick:u})=>{const[x,j]=n.useState(1.7777777777777777),d=typeof window<"u"&&window.matchMedia("(pointer: fine) and (min-width: 768px)").matches;n.useEffect(()=>{if(!d)return;const e=()=>j(window.innerWidth/Math.max(1,window.innerHeight));return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d]);const h=n.useRef(null),w=`${n.useMemo(()=>{const e=1.3333333333333333,l=16/9,p=typeof s=="number"&&isFinite(s)&&s>0?s:null;if(p)return Math.min(l,Math.max(e,p));const E=d?x:16/9;return Math.min(l,Math.max(e,E))},[d,x,s])} / 1`,o=n.useMemo(()=>r?a||(i?`https://videodelivery.net/${i}/manifest/video.m3u8`:null):null,[r,a,i]);n.useEffect(()=>{if(!r||!o)return;const e=h.current;if(!e)return;const l=()=>{console.warn("Video failed to load, falling back to iframe if streamUID available")};return e.addEventListener("error",l),()=>e.removeEventListener("error",l)},[r,o,i]),n.useEffect(()=>{c&&c(h.current)},[c,r,o]);const m="100%",f=d?{width:"100%",maxWidth:m,maxHeight:"100%",aspectRatio:w,background:"#000",borderRadius:10,overflow:"hidden",display:"flex",boxSizing:"border-box"}:{width:"auto",maxWidth:m,maxHeight:"100%",height:"var(--player-height)",aspectRatio:w,background:"#000",borderRadius:10,overflow:"hidden",display:"flex",boxSizing:"border-box"};if(r&&o)return t.jsx("div",{style:f,onClick:u,onTouchEnd:e=>{u&&(e.preventDefault(),u())},children:t.jsxs("video",{ref:h,autoPlay:v,loop:g,muted:y,controls:b,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"contain",background:"#000",cursor:u?"pointer":"default"},children:[t.jsx("source",{src:o,type:"application/x-mpegURL"}),"Your browser does not support the video tag."]},o)});if(i){const e=`https://iframe.videodelivery.net/${i}`;return t.jsx(t.Fragment,{children:t.jsx("div",{style:f,children:t.jsx("iframe",{src:e,title:"Clip",allow:"autoplay; encrypted-media; picture-in-picture; fullscreen",allowFullScreen:!0,style:{flex:1,width:"100%",height:"100%",border:0}},i)})})}return a?t.jsx("div",{style:f,children:t.jsx("video",{controls:!0,style:{width:"100%",height:"100%"},poster:void 0,children:t.jsx("source",{src:a,type:"application/x-mpegURL"})})}):t.jsx("div",{children:"No video"})};export{L as P};
