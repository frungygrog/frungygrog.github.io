import{r as i,j as e,G as Se,x as _e,W as Oe,Y as Ue,Z as De,v as he,_ as Ne,M as Qe,i as $e,P as He,$ as me,w as ke,a0 as Je,L as Ye,c as fe,a1 as Ge,o as Xe,a2 as Ke,a3 as Ze}from"./vendor-react-Y5jcGNp7.js";import{u as ze,a as p,A as g,b as Ve,c as et,e as tt}from"./index-l8FsTK3-.js";import{B as st}from"./editor-lib-DMtQ8uAR.js";import"./vendor-By4OFKBA.js";import"./editor-components-DUULl51x.js";import"./beatmap-preview-CmxHOdtI.js";function at({beatmapMeta:s,beatmapVersion:l}){const r=i.useRef(null),P=i.useRef(null),[y,h]=i.useState(!1),[w,T]=i.useState(!1),[I,q]=i.useState(0);i.useEffect(()=>{if(r.current&&P.current){const O=r.current.offsetWidth,k=P.current.scrollWidth;q(k),T(k>O)}},[s,l]);const u=s?e.jsxs(e.Fragment,{children:[s.artist," – ",s.title,s.mapper?` (by ${s.mapper})`:"",l?` [${l}]`:""]}):l?`[${l}]`:"Beatmap",L=I>0?Math.max(3,I/50):3;return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes beatmap-marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(calc(-100% - 1em)); }
        }
      `}),e.jsxs("div",{ref:r,className:"muted one-line",style:{fontSize:12,color:"#7b8491",flex:"0 1 auto",minWidth:0,overflow:"hidden",whiteSpace:"nowrap",position:"relative",cursor:w?"pointer":"default"},onMouseEnter:()=>w&&h(!0),onMouseLeave:()=>h(!1),children:[e.jsx("span",{ref:P,style:{display:"inline-block",animation:y&&w?`beatmap-marquee ${L}s linear infinite`:"none"},children:u}),y&&w&&e.jsx("span",{style:{display:"inline-block",paddingLeft:"1em"},children:u})]})]})}function rt({submission:s,canManage:l,onUpdate:r,onDelete:P,isGroup:y=!1}){const[h,w]=i.useState(!1),[T,I]=i.useState(!1),[q,u]=i.useState(null),[L,O]=i.useState(s.beatmapset_id),[k,U]=i.useState(!1),[Z,Y]=i.useState(!1),[G,D]=i.useState(null),[X,ae]=i.useState(!1),[B,V]=i.useState(s.acknowledgments||[]),[F,Q]=i.useState(s.acknowledged_by_me||!1),E=i.useRef(null),K=i.useRef(null),N=i.useRef(null),{notify:S}=ze();i.useEffect(()=>{V(s.acknowledgments||[]),Q(s.acknowledged_by_me||!1)},[s.acknowledgments,s.acknowledged_by_me]),i.useEffect(()=>{console.log("[QueueSubmission] Submission data:",{id:s.id,beatmap_url:s.beatmap_url,beatmapset_id:s.beatmapset_id,beatmap_id:s.beatmap_id,beatmap_version:s.beatmap_version})},[s.id]),i.useEffect(()=>{if(!s.beatmap_url||q&&L)return;let a=!1;return(async()=>{try{console.log("[QueueSubmission] Fetching beatmap metadata...",{beatmap_url:s.beatmap_url,existing_beatmapset_id:s.beatmapset_id,existing_beatmap_id:s.beatmap_id});let d;try{d=new URL(s.beatmap_url)}catch(j){console.error("[QueueSubmission] Invalid beatmap URL:",s.beatmap_url,j);return}const R=d.hash.match(/#osu\/(\d+)/),M=R?R[1]:null;d.hash="";const W={url:d.toString()};if(M?W.beatmap_id=M:s.beatmap_id&&(W.beatmap_id=String(s.beatmap_id)),console.log("[QueueSubmission] Resolving beatmap with params:",W),!a){const j=await p(g.osu.resolveBeatmap+Ve(W),{requireAuth:!1});console.log("[QueueSubmission] Beatmap resolve response:",j),j.setId&&!L&&(console.log("[QueueSubmission] Setting beatmapset_id from API:",j.setId),O(Number(j.setId))),(j.title||j.artist)&&u({title:j.title||null,artist:j.artist||null,mapper:j.mapper||null})}}catch(d){console.error("[QueueSubmission] Error fetching beatmap metadata:",d)}})(),()=>{a=!0}},[s.beatmap_url,s.beatmap_id,s.beatmapset_id,q,L]),i.useEffect(()=>{if(!k||!N.current){D(null);return}const a=()=>{if(N.current){const d=N.current.getBoundingClientRect();D({top:d.bottom+8,right:window.innerWidth-d.right})}};return a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}},[k]),i.useEffect(()=>{if(!T)return;const a=d=>{const R=d.target;E.current&&!E.current.contains(R)&&!R.closest("[data-status-dropdown]")&&I(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[T]),i.useEffect(()=>{if(!k)return;const a=d=>{K.current&&!K.current.contains(d.target)&&N.current&&!N.current.contains(d.target)&&U(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[k]);const ee=async a=>{if(!h){w(!0);try{await p(g.moddi.queueSubmission(String(s.queue_id),s.id),{method:"PATCH",body:JSON.stringify({status:a})});const d={...s,status:a,updated_at:Math.floor(Date.now()/1e3)};r&&r(d),S("Status updated",{variant:"success"})}catch{S("Failed to update status",{variant:"error"})}finally{w(!1),I(!1)}}},z=async()=>{if(!h){w(!0);try{const a=!!s.is_archived;await p(g.moddi.queueSubmission(String(s.queue_id),s.id),{method:"PATCH",body:JSON.stringify({is_archived:!a})});const d={...s,is_archived:a?0:1,updated_at:Math.floor(Date.now()/1e3)};r&&r(d),S(a?"Unarchived":"Archived",{variant:"success"})}catch{S("Failed to update archive status",{variant:"error"})}finally{w(!1)}}},re=async()=>{if(confirm("Are you sure you want to delete this submission? This action cannot be undone.")&&!h){w(!0);try{await p(g.moddi.queueSubmissionDelete(String(s.queue_id),s.id),{method:"DELETE"}),S("Submission deleted",{variant:"success"}),P&&P(s.id)}catch{S("Failed to delete submission",{variant:"error"})}finally{w(!1)}}},ie=async()=>{if(!X){ae(!0);try{if(F){if(await p(g.moddi.queueSubmissionUnacknowledge(String(s.queue_id),s.id),{method:"DELETE"}),Q(!1),S("Unacknowledged",{variant:"info"}),r){const a={...s,acknowledged_by_me:!1};r(a)}}else if(await p(g.moddi.queueSubmissionAcknowledge(String(s.queue_id),s.id),{method:"POST"}),Q(!0),S("Acknowledged",{variant:"success"}),r){const a={...s,acknowledged_by_me:!0};r(a)}}catch{S("Failed to update acknowledgment",{variant:"error"})}finally{ae(!1)}}},x={unchecked:"#f59e0b",accepted:"#10b981",denied:"#ef4444",finished:"#6366f1"},v={unchecked:"Pending",accepted:"Accepted",denied:"Denied",finished:"Finished"},_=L||s.beatmapset_id,f=_?`https://assets.ppy.sh/beatmaps/${_}/covers/card.jpg`:null;i.useEffect(()=>{f?console.log("[QueueSubmission] Background image URL:",f,"for beatmapset_id:",_):console.log("[QueueSubmission] No background image URL - beatmapset_id:",_,"submission.beatmapset_id:",s.beatmapset_id)},[f,_,s.beatmapset_id]);const C=!!s.is_archived;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{position:"relative",borderRadius:12,overflow:"hidden",borderBottom:"1px solid rgba(255,255,255,0.06)",background:f?"transparent":"rgba(255,255,255,0.01)",transition:"background-color 0.15s ease",opacity:C?.6:1},onMouseEnter:a=>{f||(a.currentTarget.style.backgroundColor="rgba(255,255,255,0.025)")},onMouseLeave:a=>{f||(a.currentTarget.style.backgroundColor="rgba(255,255,255,0.01)")},children:[f&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:f,alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",opacity:.35,zIndex:0,pointerEvents:"none"},onError:a=>{a.currentTarget.style.display="none"}}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.75) 100%)",zIndex:0}})]}),e.jsx("div",{style:{position:"relative",zIndex:1,padding:"16px"},children:e.jsxs("div",{className:"row",style:{alignItems:"flex-start",justifyContent:"space-between",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[s.beatmap_url&&e.jsx("div",{style:{marginBottom:8},children:e.jsx(at,{beatmapMeta:q,beatmapVersion:s.beatmap_version})}),e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,marginTop:8},children:[s.avatar_url&&e.jsx("img",{src:s.avatar_url,width:24,height:24,style:{borderRadius:"50%"},alt:s.username}),e.jsx("span",{style:{fontSize:13},children:s.username}),e.jsx("span",{className:"muted",style:{fontSize:12},children:new Date(s.created_at*1e3).toLocaleDateString()})]}),s.message&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,fontSize:13,lineHeight:1.5},children:[e.jsx("div",{className:"muted",style:{fontSize:11,marginBottom:4,fontWeight:600},children:"Message:"}),s.message]}),B&&B.length>0&&e.jsxs("div",{style:{marginTop:12,padding:8,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.06)",borderRadius:6,fontSize:12},children:[e.jsx("div",{className:"muted",style:{fontSize:11,marginBottom:6,fontWeight:600},children:"Acknowledged by:"}),e.jsxs("div",{className:"row",style:{flexWrap:"wrap",gap:6,alignItems:"center"},children:[B.slice(0,5).map(a=>e.jsxs("div",{className:"row",style:{alignItems:"center",gap:4},children:[a.avatar_url&&e.jsx("img",{src:a.avatar_url,width:20,height:20,style:{borderRadius:"50%"},alt:a.username}),e.jsx("span",{style:{fontSize:11,color:"var(--text)"},children:a.username})]},a.user_id)),B.length>5&&e.jsxs("span",{className:"muted",style:{fontSize:11},children:["+",B.length-5," more"]})]})]}),s.beatmap_url&&e.jsx("div",{style:{marginTop:12,display:"flex",alignItems:"center",gap:8},children:e.jsxs("button",{ref:N,className:"chip-btn link",onClick:a=>{a.preventDefault(),a.stopPropagation(),U(d=>!d)},title:"Beatmap options","aria-label":"Beatmap options",style:{display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:"var(--text)",fontSize:13,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.background="rgba(255,255,255,0.1)",a.currentTarget.style.borderColor="rgba(255,255,255,0.2)"},onMouseLeave:a=>{a.currentTarget.style.background="rgba(255,255,255,0.05)",a.currentTarget.style.borderColor="rgba(255,255,255,0.1)"},children:[e.jsx(Se,{size:14}),e.jsx("span",{className:"muted",style:{fontSize:12},children:"Beatmap"}),e.jsx(_e,{size:12,style:{marginLeft:4,opacity:.7}})]})})]}),l?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("button",{className:"icon-link",onClick:ie,disabled:X||h,title:F?"Unacknowledge":"Acknowledge",style:{color:F?"#10b981":"var(--muted)",width:"auto",height:"auto",padding:"6px",borderRadius:6,transition:"all 0.2s ease",background:F?"rgba(16, 185, 129, 0.1)":"transparent"},onMouseEnter:a=>{!X&&!h&&(a.currentTarget.style.background=F?"rgba(16, 185, 129, 0.2)":"rgba(255,255,255,0.05)")},onMouseLeave:a=>{a.currentTarget.style.background=F?"rgba(16, 185, 129, 0.1)":"transparent"},children:e.jsx(Oe,{size:16})}),e.jsx("button",{className:"icon-link",onClick:z,disabled:h,title:C?"Unarchive":"Archive",style:{color:C?"#6366f1":"var(--muted)",width:"auto",height:"auto",padding:"6px",borderRadius:6,transition:"all 0.2s ease",background:C?"rgba(99, 102, 241, 0.1)":"transparent"},onMouseEnter:a=>{h||(a.currentTarget.style.background=C?"rgba(99, 102, 241, 0.2)":"rgba(255,255,255,0.05)")},onMouseLeave:a=>{a.currentTarget.style.background=C?"rgba(99, 102, 241, 0.1)":"transparent"},children:C?e.jsx(Ue,{size:16}):e.jsx(De,{size:16})}),e.jsx("button",{className:"icon-link",onClick:re,disabled:h,title:"Delete submission",style:{color:"var(--danger)",width:"auto",height:"auto",padding:"6px",borderRadius:6,transition:"all 0.2s ease",background:"transparent"},onMouseEnter:a=>{h||(a.currentTarget.style.background="rgba(239, 68, 68, 0.1)")},onMouseLeave:a=>{a.currentTarget.style.background="transparent"},children:e.jsx(he,{size:16})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("button",{ref:E,onClick:()=>I(!T),disabled:h,style:{display:"inline-flex",alignItems:"center",gap:6,padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:600,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",background:x[s.status]+"15",border:`1.5px solid ${x[s.status]}50`,color:x[s.status],whiteSpace:"nowrap",cursor:h?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:h?.6:1},onMouseEnter:a=>{h||(a.currentTarget.style.background=x[s.status]+"25",a.currentTarget.style.borderColor=x[s.status]+"70",a.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:a=>{a.currentTarget.style.background=x[s.status]+"15",a.currentTarget.style.borderColor=x[s.status]+"50",a.currentTarget.style.transform="translateY(0)"},children:[e.jsx("span",{children:v[s.status]}),e.jsx(_e,{size:14,style:{marginLeft:2,transition:"transform 0.2s ease",transform:T?"rotate(180deg)":"rotate(0deg)"}})]}),T&&E.current&&Ne.createPortal(e.jsx("div",{"data-status-dropdown":!0,style:{position:"fixed",background:"var(--panel)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:10,padding:6,zIndex:1e4,minWidth:140,boxShadow:"0 8px 24px rgba(0,0,0,0.4)",...(()=>{const a=E.current.getBoundingClientRect();return{top:a.bottom+6,right:window.innerWidth-a.right}})()},onClick:a=>a.stopPropagation(),children:["unchecked","accepted","denied","finished"].map(a=>e.jsx("button",{onClick:()=>ee(a),style:{display:"block",width:"100%",padding:"8px 12px",borderRadius:6,fontSize:13,fontWeight:a===s.status?600:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",textAlign:"left",background:a===s.status?x[a]+"15":"transparent",color:a===s.status?x[a]:"var(--text)",border:"none",cursor:"pointer",transition:"all 0.15s ease",marginBottom:2},onMouseEnter:d=>{a!==s.status&&(d.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:d=>{a!==s.status&&(d.currentTarget.style.background="transparent")},children:v[a]},a))}),document.body)]})]}):e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:600,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",background:x[s.status]+"15",border:`1.5px solid ${x[s.status]}50`,color:x[s.status],whiteSpace:"nowrap"},children:v[s.status]})]})})]}),k&&G&&s.beatmap_url&&e.jsxs("div",{ref:K,style:{position:"fixed",top:G.top,right:G.right,background:"var(--panel)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,padding:6,zIndex:1e3,minWidth:160,boxShadow:"0 12px 30px rgba(0,0,0,0.4)"},children:[e.jsxs("a",{className:"menu-item",href:s.beatmap_url,target:"_blank",rel:"noreferrer",onClick:()=>U(!1),children:[e.jsx(Se,{size:16,style:{marginRight:8}}),"osu.ppy.sh"]}),_&&e.jsx("button",{className:"menu-item",onClick:()=>{Y(!0),U(!1)},children:"Preview"})]}),Z&&_&&e.jsx(st,{open:Z,onClose:()=>Y(!1),downloadUrl:`${et}${g.osu.downloadBeatmapset(_)}`,beatmapId:s.beatmap_id??void 0,beatmapVersion:s.beatmap_version??void 0})]})}const Te=({content:s})=>e.jsx("div",{style:{fontSize:13,lineHeight:1.6,color:"var(--text)"},children:e.jsx(Ze,{components:{p:({children:l})=>e.jsx("p",{style:{margin:"0 0 8px 0"},children:l}),ul:({children:l})=>e.jsx("ul",{style:{margin:"0 0 8px 0",paddingLeft:20},children:l}),ol:({children:l})=>e.jsx("ol",{style:{margin:"0 0 8px 0",paddingLeft:20},children:l}),li:({children:l})=>e.jsx("li",{style:{margin:"0 0 4px 0"},children:l}),strong:({children:l})=>e.jsx("strong",{style:{fontWeight:600},children:l}),em:({children:l})=>e.jsx("em",{children:l}),code:({children:l})=>e.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 4px",borderRadius:4,fontSize:12},children:l}),h1:({children:l})=>e.jsx("h1",{style:{fontSize:18,fontWeight:700,margin:"0 0 8px 0"},children:l}),h2:({children:l})=>e.jsx("h2",{style:{fontSize:16,fontWeight:700,margin:"0 0 8px 0"},children:l}),h3:({children:l})=>e.jsx("h3",{style:{fontSize:14,fontWeight:600,margin:"0 0 8px 0"},children:l})},children:s})});function ut(){const{id:s}=Qe(),l=$e(),[r,P]=i.useState(null),[y,h]=i.useState([]),[w,T]=i.useState([]),[I,q]=i.useState(!0),[u,L]=i.useState(null),[O,k]=i.useState(!1),[U,Z]=i.useState(!1),[Y,G]=i.useState(""),[D,X]=i.useState(""),[ae,B]=i.useState(null),[V,F]=i.useState(!1),[Q,E]=i.useState(""),[K,N]=i.useState(""),[S,ee]=i.useState(""),[z,re]=i.useState(!1),[ie,x]=i.useState(!1),[v,_]=i.useState("general"),[f,C]=i.useState(!1),[a,d]=i.useState(!1),[R,M]=i.useState(null),[te,W]=i.useState(""),[j,se]=i.useState([]),[oe,$]=i.useState(!1),le=i.useRef(null),de=i.useRef(null),ce=i.useRef(null),[ue,Ce]=i.useState([]),[ye,be]=i.useState(!1),[ge,xe]=i.useState(null),{notify:c}=ze(),{queueStatusFilters:ve}=tt(),A=async()=>{var t,o;if(s){q(!0);try{const n=await p(g.moddi.queue(s),{requireAuth:!1});P(n.queue||null),h(n.members||[]),T(n.submissions||[])}catch(n){(t=n==null?void 0:n.message)!=null&&t.includes("403")||(o=n==null?void 0:n.message)!=null&&o.includes("Forbidden")?(c("You do not have access to this queue",{variant:"error"}),l("/md/queues")):c("Failed to load queue",{variant:"error"})}finally{q(!1)}}};i.useEffect(()=>{A(),p(g.auth.me,{requireAuth:!1}).then(t=>L(t)).catch(()=>{})},[s]);const H=u&&r&&(r.owner_id===u.id||y.some(t=>t.user_id===u.id&&t.joined_at));u&&y.some(t=>t.user_id===u.id&&t.joined_at);const je=u&&r&&(r.owner_id===u.id||y.some(t=>t.user_id===u.id&&t.joined_at)),Fe=async t=>{if(t.preventDefault(),!r||r.is_open===0){c("Queue is closed for submissions",{variant:"error"});return}if(!Y.trim()){c("Beatmap URL is required",{variant:"error"});return}Z(!0);try{await p(g.moddi.queueSubmit(s),{method:"POST",body:JSON.stringify({beatmap_url:Y.trim(),message:D.trim()||null})}),c("Submission created!",{variant:"success"}),k(!1),G(""),X(""),A()}catch(o){c((o==null?void 0:o.message)||"Failed to create submission",{variant:"error"})}finally{Z(!1)}},Ee=t=>{T(o=>o.map(n=>n.id===t.id?t:n)),t.acknowledged_by_me!==void 0&&A()},Re=()=>{r&&(E(r.name),N(r.description||""),ee(r.rules||""),F(!0),_("general"))},J=()=>{F(!1),E(""),N(""),ee("")},Me=async()=>{if(!(!r||!je)){x(!0);try{const t=r.is_open!==1;await p(g.moddi.queue(s),{method:"PATCH",body:JSON.stringify({is_open:t})}),c(`Queue ${t?"opened":"closed"}`,{variant:"success"}),A()}catch(t){c((t==null?void 0:t.message)||"Failed to update status",{variant:"error"})}finally{x(!1)}}},Pe=async t=>{if(t.preventDefault(),!r||!Q.trim()){c("Queue name is required",{variant:"error"});return}C(!0);try{const o=y.filter(n=>n.user_id!==r.owner_id&&n.role!=="owner").length>0;await p(g.moddi.queue(s),{method:"PATCH",body:JSON.stringify({name:Q.trim(),description:K.trim()||null,rules:S.trim()||null,is_group:o})}),c("Queue updated!",{variant:"success"}),J(),A()}catch(o){c((o==null?void 0:o.message)||"Failed to update queue",{variant:"error"})}finally{C(!1)}};i.useEffect(()=>{if(!te.trim()){se([]),$(!1);return}const t=setTimeout(async()=>{try{const n=(await p(g.moddi.usersSearch(te),{requireAuth:!1})).items||[];se(n),$(n.length>0)}catch(o){console.error("Search failed:",o),se([]),$(!1)}},300);return()=>clearTimeout(t)},[te]);const Ie=async t=>{if(!a){d(!0);try{await p(g.moddi.queueInvite(s),{method:"POST",body:JSON.stringify({user_id:t})}),c("Invite sent!",{variant:"success"}),W(""),se([]),$(!1),A()}catch(o){c((o==null?void 0:o.message)||"Failed to invite member",{variant:"error"})}finally{d(!1)}}},pe=async()=>{if(!(!s||!H))try{const t=await p(g.moddi.queueBlockedUsers(s));Ce(t.blocked||[])}catch(t){console.error("Failed to load blocked users:",t)}},qe=async t=>{if(!(!s||ye)&&confirm("Block this user from submitting to this queue?")){be(!0);try{await p(g.moddi.queueBlockUser(s),{method:"POST",body:JSON.stringify({user_id:t})}),c("User blocked",{variant:"success"}),pe(),W(""),se([]),$(!1)}catch(o){c((o==null?void 0:o.message)||"Failed to block user",{variant:"error"})}finally{be(!1)}}},we=async t=>{if(!(!s||ge===t)){xe(t);try{await p(g.moddi.queueUnblockUser(s,t),{method:"DELETE"}),c("User unblocked",{variant:"success"}),pe()}catch(o){c((o==null?void 0:o.message)||"Failed to unblock user",{variant:"error"})}finally{xe(null)}}};i.useEffect(()=>{v==="members"&&H&&s&&pe()},[v,H,s]);const Le=async()=>{if(r&&confirm(`Are you sure you want to delete "${r.name}"? This action cannot be undone.`)){re(!0);try{await p(g.moddi.queue(s),{method:"DELETE"}),c("Queue deleted",{variant:"success"}),l("/md/queues")}catch(t){c((t==null?void 0:t.message)||"Failed to delete queue",{variant:"error"})}finally{re(!1)}}},Be=async t=>{if(!u||!r||u.id!==r.owner_id){c("Only the queue owner can remove members",{variant:"error"});return}if(confirm("Remove this member from the queue?")){M(t);try{await p(g.moddi.queueMember(s,t),{method:"DELETE"}),c("Member removed",{variant:"success"});const n=y.filter(m=>m.user_id!==t).some(m=>m.user_id!==(r==null?void 0:r.owner_id)&&m.role!=="owner");if(r&&r.is_group===1&&!n)try{await p(g.moddi.queue(s),{method:"PATCH",body:JSON.stringify({is_group:!1})})}catch{console.warn("Failed to convert queue back to individual after removing last member")}A()}catch(o){c((o==null?void 0:o.message)||"Failed to remove member",{variant:"error"})}finally{M(null)}}},We=async()=>{if(u&&confirm("Leave this queue? You will need to be invited again to rejoin.")){M(u.id);try{await p(g.moddi.queueMember(s,u.id),{method:"DELETE"}),c("Left queue",{variant:"success"});const o=y.filter(n=>n.user_id!==u.id).some(n=>n.user_id!==(r==null?void 0:r.owner_id)&&n.role!=="owner");if(r&&r.is_group===1&&!o)try{await p(g.moddi.queue(s),{method:"PATCH",body:JSON.stringify({is_group:!1})})}catch{console.warn("Failed to convert queue back to individual after leaving")}l("/md/queues")}catch(t){c((t==null?void 0:t.message)||"Failed to leave queue",{variant:"error"})}finally{M(null)}}},Ae=async t=>{if(confirm("Cancel this invitation?")){M(t);try{await p(g.moddi.queueMember(s,t),{method:"DELETE"}),c("Invitation canceled",{variant:"success"}),A()}catch(o){c((o==null?void 0:o.message)||"Failed to cancel invitation",{variant:"error"})}finally{M(null)}}};return i.useEffect(()=>{if(!V)return;const t=o=>{const n=o.target;n.closest(".manage-overlay")||n.closest(".manage-overlay-backdrop")||!n.closest(".manage-popup")&&ce.current&&!ce.current.contains(n)&&J()};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[V]),i.useEffect(()=>{if(!oe)return;const t=o=>{const n=o.target;le.current&&!le.current.contains(n)&&de.current&&!de.current.contains(n)&&$(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[oe]),I?e.jsx("div",{className:"muted",style:{textAlign:"center",padding:48},children:"Loading..."}):r?e.jsxs("div",{style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"0 16px"},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:12,marginBottom:16,paddingTop:16},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",gap:12,flex:1,minWidth:0},children:[e.jsx("button",{className:"icon-link",onClick:()=>l("/md/queues"),style:{width:"auto",height:"auto",padding:"4px",background:"transparent"},title:"Back","aria-label":"Back",children:e.jsx(He,{size:20})}),e.jsxs("div",{className:"row",style:{alignItems:"center",gap:10,flex:1,minWidth:0},children:[e.jsx("div",{className:"title",style:{flex:1,minWidth:0},children:r.name}),je&&e.jsxs("button",{onClick:Me,disabled:ie,className:`queue-status-badge ${r.is_open===1?"status-open":"status-closed"}`,title:r.is_open===1?"Close queue":"Open queue","aria-label":r.is_open===1?"Close queue":"Open queue",children:[r.is_open===1?e.jsx(me,{size:14}):e.jsx(ke,{size:14}),e.jsx("span",{children:r.is_open===1?"Open":"Closed"})]})]})]}),e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8},children:[H&&e.jsx("button",{ref:ce,className:"icon-link",onClick:Re,style:{width:"auto",height:"auto",padding:"4px"},title:"Manage Queue","aria-label":"Manage Queue",children:e.jsx(Je,{size:18})}),y.length>0&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:y.filter(t=>t.joined_at!==null).sort((t,o)=>{const n=t.role==="owner"||t.user_id===(r==null?void 0:r.owner_id),m=o.role==="owner"||o.user_id===(r==null?void 0:r.owner_id);return n&&!m?-1:!n&&m?1:(o.joined_at||0)-(t.joined_at||0)}).map(t=>e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>B(t.user_id),onMouseLeave:()=>B(null),children:[e.jsx(Ye,{to:`/profile/${t.user_id}`,className:"queue-member-avatar",title:t.username,children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:t.username}):e.jsx("div",{style:{width:"100%",height:"100%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,color:"var(--muted)"},children:t.username.charAt(0).toUpperCase()})}),ae===t.user_id&&e.jsxs("div",{className:"queue-member-tooltip",children:[t.username," ",t.role!=="member"?`(${t.role})`:""]})]},t.user_id))})]})]}),r.description&&e.jsx("div",{className:"muted",style:{marginBottom:16,fontSize:14,padding:"0 4px"},children:r.description}),r.rules&&e.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--panel-dark)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:8},children:"Rules"}),e.jsx(Te,{content:r.rules})]}),r.is_open===0&&e.jsx("div",{style:{marginBottom:12,padding:10,background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:10,textAlign:"center",fontSize:14,color:"#f59e0b"},children:"This queue is currently closed for submissions"}),e.jsxs("div",{style:{background:"var(--panel)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,marginBottom:12,opacity:r.is_open===0?.6:1},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",cursor:r.is_open===1?"pointer":"not-allowed",padding:"8px 12px",minHeight:36},onClick:()=>r.is_open===1&&k(!O),children:[e.jsxs("span",{style:{fontWeight:600,fontSize:16,lineHeight:1},children:["Submit a beatmap ",r.is_open===0&&"(Closed)"]}),r.is_open===1&&(O?e.jsx(fe,{size:16}):e.jsx(Ge,{size:16}))]}),O&&e.jsx("form",{onSubmit:Fe,style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.06)"},children:e.jsxs("div",{className:"col",style:{gap:12},children:[e.jsx("input",{type:"url",placeholder:"Beatmap URL e.g. https://osu.ppy.sh/beatmapsets/...",value:Y,onChange:t=>G(t.target.value),required:!0,style:{background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:12,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:14}}),e.jsx("input",{type:"text",placeholder:"Message (optional, max 100 chars)",value:D,onChange:t=>X(t.target.value.slice(0,100)),maxLength:100,style:{background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:12,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:14}}),D.length>0&&e.jsxs("div",{className:"muted",style:{fontSize:12,textAlign:"right",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:[D.length,"/100"]}),e.jsxs("div",{className:"row",style:{gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:t=>{t.stopPropagation(),k(!1)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn",disabled:U,onClick:t=>t.stopPropagation(),children:U?"Submitting...":"Submit"})]})]})})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.06)",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:e.jsx("div",{className:"col",style:{gap:0},children:w.length===0?e.jsx("div",{className:"muted",style:{textAlign:"center",padding:48},children:"No submissions yet."}):w.filter(t=>{const o=!!t.is_archived;return ve[t.status]&&(ve.archived||!o)}).map(t=>e.jsx(rt,{submission:t,canManage:!!H,isGroup:(r==null?void 0:r.is_group)===1,onUpdate:Ee,onDelete:o=>{T(n=>n.filter(m=>m.id!==o))}},t.id))})}),V&&Ne.createPortal(e.jsxs("div",{className:"overlay manage-overlay",children:[e.jsx("div",{className:"overlay-backdrop manage-overlay-backdrop",onClick:J}),e.jsxs("div",{className:"overlay-card",style:{maxWidth:500},children:[e.jsx("button",{className:"overlay-close",onClick:J,"aria-label":"Close",children:e.jsx(fe,{size:18})}),e.jsxs("div",{className:"col",style:{gap:0,padding:"0"},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:16,padding:"20px 16px 12px",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:[e.jsx("div",{className:"title",style:{fontSize:20,margin:0,padding:0,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Manage Queue"}),e.jsxs("div",{className:"tabs",role:"tablist",style:{margin:0},children:[e.jsx("button",{role:"tab","aria-selected":v==="general",className:`tab ${v==="general"?"active":""}`,onClick:()=>_("general"),children:"General"}),e.jsx("button",{role:"tab","aria-selected":v==="rules",className:`tab ${v==="rules"?"active":""}`,onClick:()=>_("rules"),children:"Rules"}),e.jsx("button",{role:"tab","aria-selected":v==="members",className:`tab ${v==="members"?"active":""}`,onClick:()=>_("members"),children:"Members"})]})]}),e.jsx("hr",{className:"subtle-divider",style:{margin:"0 16px"}}),e.jsxs("form",{onSubmit:Pe,className:"col",style:{gap:0,padding:"16px"},children:[v==="general"&&e.jsxs("div",{className:"col",style:{gap:10},children:[e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Queue Name"}),e.jsx("input",{type:"text",value:Q,onChange:t=>E(t.target.value),required:!0,style:{background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:10,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:14}})]}),e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Description (optional)"}),e.jsx("textarea",{placeholder:"Description",value:K,onChange:t=>N(t.target.value),rows:3,style:{background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:10,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{className:"row",style:{gap:8,justifyContent:"space-between",alignItems:"center",marginTop:8},children:[e.jsxs("button",{type:"button",className:"btn secondary",onClick:Le,disabled:z||f,style:{background:"rgba(248, 113, 113, 0.1)",borderColor:"rgba(248, 113, 113, 0.3)",color:"var(--danger)",fontSize:13,padding:"8px 12px"},children:[e.jsx(he,{size:14,style:{marginRight:6}}),z?"Deleting...":"Delete Queue"]}),e.jsxs("div",{className:"row",style:{gap:8},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:J,disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn",disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:f?"Updating...":"Save Changes"})]})]})]}),v==="rules"&&e.jsxs("div",{className:"col",style:{gap:10},children:[e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Rules (optional, markdown supported)"}),e.jsx("textarea",{placeholder:"Rules in markdown format...",value:S,onChange:t=>ee(t.target.value),rows:8,style:{background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:10,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:13,resize:"vertical"}}),S&&e.jsxs("div",{style:{padding:10,background:"var(--panel-dark)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,fontSize:12},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:6,opacity:.8,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Preview:"}),e.jsx(Te,{content:S})]})]}),e.jsxs("div",{className:"row",style:{gap:8,justifyContent:"flex-end",marginTop:8},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:J,disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn",disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:f?"Updating...":"Save Changes"})]})]}),v==="members"&&e.jsxs("div",{className:"col",style:{gap:10},children:[e.jsxs("div",{className:"col",style:{gap:6,position:"relative"},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Invite Members"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{ref:le,type:"text",placeholder:"Search username or ID",value:te,onChange:t=>W(t.target.value),onKeyDown:t=>{t.key==="Enter"&&t.preventDefault()},onFocus:()=>{j.length>0&&$(!0)},style:{width:"100%",background:"var(--bg)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:10,color:"var(--text)",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif",fontSize:14}}),oe&&j.length>0&&e.jsx("div",{ref:de,style:{position:"absolute",top:"100%",left:0,right:0,marginTop:4,background:"var(--panel)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,maxHeight:300,overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:e.jsx("div",{className:"col",style:{gap:0},children:j.map(t=>{const o=y.some(b=>b.user_id===t.id&&b.joined_at),n=y.some(b=>b.user_id===t.id&&b.invited_at&&!b.joined_at),m=ue.some(b=>b.user_id===t.id);return e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:8,padding:"8px 12px"},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8,minWidth:0},children:[t.avatar_url&&e.jsx("img",{src:t.avatar_url,width:20,height:20,style:{borderRadius:"50%",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:8,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:[e.jsx("span",{children:t.username}),o&&e.jsx("span",{style:{color:"var(--muted)",fontSize:11,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Already a member"}),n&&e.jsx("span",{style:{color:"var(--accent)",fontSize:11,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Invited"})]}),e.jsxs("div",{className:"muted",style:{fontSize:11,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:["id ",t.id," • osu ",t.osu_user_id]})]})]}),H&&!o&&!n&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("button",{className:"icon-link",onClick:b=>{b.stopPropagation(),a||Ie(t.id)},disabled:a,title:"Invite user",style:{width:"auto",height:"auto",padding:"4px"},children:e.jsx(Xe,{size:16})}),e.jsx("button",{className:"icon-link",onClick:b=>{b.stopPropagation(),m?we(t.id):qe(t.id)},disabled:ye||ge===t.id,title:m?"Unblock user":"Block user",style:{width:"auto",height:"auto",padding:"4px",color:m?"var(--accent)":"var(--danger)"},children:m?e.jsx(me,{size:16}):e.jsx(ke,{size:16})})]})]},t.id)})})})]})]}),y.length>0&&e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Members"}),e.jsx("div",{className:"col",style:{gap:4},children:(()=>{const t=y.filter(n=>n.joined_at!==null).sort((n,m)=>{const b=n.role==="owner"||n.user_id===(r==null?void 0:r.owner_id),ne=m.role==="owner"||m.user_id===(r==null?void 0:r.owner_id);return b&&!ne?-1:!b&&ne?1:(m.joined_at||0)-(n.joined_at||0)}),o=y.filter(n=>n.invited_at!==null&&n.joined_at===null);return e.jsxs(e.Fragment,{children:[t.map(n=>{const m=u&&r&&u.id===r.owner_id,b=n.user_id===(u==null?void 0:u.id),ne=n.user_id===(r==null?void 0:r.owner_id)||n.role==="owner";return e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 0"},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flex:1,minWidth:0},children:[n.avatar_url&&e.jsx("img",{src:n.avatar_url,width:32,height:32,style:{borderRadius:"50%"},alt:n.username}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:n.username}),e.jsx("div",{className:"muted",style:{fontSize:12,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:n.role})]})]}),m&&!ne&&e.jsx("button",{className:"icon-link",onClick:()=>Be(n.user_id),disabled:R===n.user_id,title:"Remove member",style:{width:"auto",height:"auto",padding:"4px",color:"var(--danger)"},children:e.jsx(he,{size:16})}),!m&&b&&e.jsx("button",{className:"icon-link",onClick:We,disabled:R===n.user_id,title:"Leave queue",style:{width:"auto",height:"auto",padding:"4px",color:"var(--muted)"},children:e.jsx(Ke,{size:16})})]},n.user_id)}),o.length>0&&e.jsx(e.Fragment,{children:o.map(n=>e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 0",opacity:.7},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flex:1,minWidth:0},children:[n.avatar_url&&e.jsx("img",{src:n.avatar_url,width:32,height:32,style:{borderRadius:"50%"},alt:n.username}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:n.username}),e.jsx("div",{className:"muted",style:{fontSize:12,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Invited"})]})]}),e.jsx("button",{className:"icon-link",onClick:()=>Ae(n.user_id),disabled:R===n.user_id,title:"Cancel invitation",style:{width:"auto",height:"auto",padding:"4px",color:"var(--danger)"},children:e.jsx(fe,{size:16})})]},n.user_id))})]})})()})]}),H&&e.jsxs("div",{className:"col",style:{gap:6},children:[e.jsx("label",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"Blocked Users"}),ue.length===0?e.jsx("div",{className:"muted",style:{fontSize:12,padding:"8px 0",fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:"No blocked users"}):e.jsx("div",{className:"col",style:{gap:4},children:ue.map(t=>e.jsxs("div",{className:"row",style:{alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 0"},children:[e.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,flex:1,minWidth:0},children:[t.avatar_url&&e.jsx("img",{src:t.avatar_url,width:32,height:32,style:{borderRadius:"50%"},alt:t.username}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:14,fontWeight:500,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:t.username}),t.blocked_by_username&&e.jsxs("div",{className:"muted",style:{fontSize:12,fontFamily:"'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif"},children:["Blocked by ",t.blocked_by_username]})]})]}),e.jsx("button",{className:"icon-link",onClick:()=>we(t.user_id),disabled:ge===t.user_id,title:"Unblock user",style:{width:"auto",height:"auto",padding:"4px",color:"var(--accent)"},children:e.jsx(me,{size:16})})]},t.user_id))})]}),e.jsxs("div",{className:"row",style:{gap:8,justifyContent:"flex-end",marginTop:8},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:J,disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn",disabled:f||z,style:{fontSize:13,padding:"8px 16px"},children:f?"Updating...":"Save Changes"})]})]})]})]})]})]}),document.body),e.jsx("style",{children:`
        .queue-member-avatar {
          width: 32px;
          height: 32px;
          border-radius: 9999px;
          padding: 0;
          border: 1px solid rgba(255,255,255,0.08);
          overflow: hidden;
          cursor: pointer;
          background: transparent;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          text-decoration: none;
          transition: border-color 0.2s;
        }
        .queue-member-avatar:hover {
          border-color: rgba(167, 139, 250, 0.4);
        }
        .queue-member-avatar img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          display: block;
        }
        .queue-member-tooltip {
          position: absolute;
          bottom: calc(100% + 8px);
          left: 50%;
          transform: translateX(-50%);
          background: rgba(18, 20, 24, 0.95);
          color: var(--text, #e5e7eb);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 6px;
          padding: 6px 10px;
          font-size: 14px;
          white-space: nowrap;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          z-index: 10000;
          pointer-events: none;
          font-family: 'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif;
        }
        .queue-member-tooltip::after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 5px solid transparent;
          border-right: 5px solid transparent;
          border-top: 5px solid rgba(18, 20, 24, 0.95);
        }
        .queue-status-badge {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 6px 12px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 600;
          font-family: 'Torus Pro', Torus, ui-sans-serif, system-ui, sans-serif;
          border: 1px solid;
          cursor: pointer;
          transition: all 0.2s;
          white-space: nowrap;
        }
        .queue-status-badge:disabled {
          cursor: not-allowed;
          opacity: 0.6;
        }
        .queue-status-badge.status-open {
          background: rgba(52, 211, 153, 0.15);
          border-color: rgba(52, 211, 153, 0.4);
          color: #34d399;
        }
        .queue-status-badge.status-open:hover:not(:disabled) {
          background: rgba(52, 211, 153, 0.25);
          border-color: rgba(52, 211, 153, 0.5);
        }
        .queue-status-badge.status-closed {
          background: rgba(245, 158, 11, 0.15);
          border-color: rgba(245, 158, 11, 0.4);
          color: #f59e0b;
        }
        .queue-status-badge.status-closed:hover:not(:disabled) {
          background: rgba(245, 158, 11, 0.25);
          border-color: rgba(245, 158, 11, 0.5);
        }
      `})]}):e.jsx("div",{className:"muted",style:{textAlign:"center",padding:48},children:"Queue not found"})}export{ut as default};
